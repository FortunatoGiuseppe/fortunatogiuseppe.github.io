(globalThis["webpackChunktamponati_client"]=globalThis["webpackChunktamponati_client"]||[]).push([[647],{3245:(e,o,a)=>{"use strict";a.d(o,{Z:()=>l,e:()=>i});var t=a(4562);const l={id:null,nomecompleto:"",tipo:null,cf:"",provincia:"",nome:"",cognome:""},i=(0,t.r8)((()=>(0,t.y$)("vue-tamponati",{...l},sessionStorage)))},9647:(e,o,a)=>{"use strict";a.r(o),a.d(o,{default:()=>co});var t=a(3673);const l={class:"full-width sfondoHome"};function i(e,o,a,i,n,s){const d=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(d,{class:"flex",style:{padding:"0px"}},{default:(0,t.w5)((()=>[(0,t.Wm)("section",l,[((0,t.wg)(),(0,t.j4)((0,t.LL)(e.currentPage),{class:"text-white sfondoHomeComponents"}))])])),_:1})}var n=a(1762),s=a(2490),d=a(3245);const r={class:"full-width absolute-center q-pa-lg"},c=(0,t.Wm)("h1",{class:"home"},"TAMPONATI",-1),m=(0,t.Wm)("h3",{class:"home"},"Prenota il tuo tampone presso i laboratori piu vicini a te",-1);function p(e,o,a,l,i,n){return(0,t.wg)(),(0,t.j4)("div",r,[c,m])}const u=(0,t.aZ)({name:"NoLoginHome",setup(){}});u.render=p;const b=u,f=(0,t.Wm)("h1",null,"Cittadino",-1),g={class:"row justify-evenly"},v={class:"col-4"},w={class:"col-4"};function h(e,o,a,l,i,n){const s=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)("div",null,[f,(0,t.Wm)("div",g,[(0,t.Wm)("div",v,[(0,t.Wm)(s,{class:"full-width",rounded:"",size:"19px",icon:"add",label:"Nuova Prenotazione",color:"primary",onClick:e.openPrenota},null,8,["onClick"])]),(0,t.Wm)("div",w,[(0,t.Wm)(s,{class:"full-width",rounded:"",size:"19px",icon:"book",label:"Agenda personale",color:"primary",onClick:e.openAgenda},null,8,["onClick"])])])])}var W=a(8825),_=a(8880),y=a(2323);const Z=(0,t.Wm)("div",{class:"text-h6"},"Prenota Tampone",-1);function C(e,o,a,l,i,n){const s=(0,t.up)("q-card-section"),d=(0,t.up)("q-separator"),r=(0,t.up)("q-input"),c=(0,t.up)("q-select"),m=(0,t.up)("q-item-label"),p=(0,t.up)("q-item-section"),u=(0,t.up)("q-item"),b=(0,t.up)("q-date"),f=(0,t.up)("q-btn"),g=(0,t.up)("q-card-actions"),v=(0,t.up)("q-form"),w=(0,t.up)("q-card"),h=(0,t.up)("q-dialog"),W=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(h,{ref:"dialogRef",onHide:e.onDialogHide},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"q-dialog-plugin",style:{width:"450px","max-width":"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{onSubmit:(0,_.iM)(e.doPrenotazione,["prevent"])},{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[Z])),_:1}),(0,t.Wm)(d),(0,t.Wm)(s,{class:"col q-gutter-md"},{default:(0,t.w5)((()=>[2==e.state.tipo_utente||3==e.state.tipo_utente?((0,t.wg)(),(0,t.j4)(r,{key:0,modelValue:e.register.nome,"onUpdate:modelValue":o[1]||(o[1]=o=>e.register.nome=o),outlined:"",label:"Nome",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),2==e.state.tipo_utente||3==e.state.tipo_utente?((0,t.wg)(),(0,t.j4)(r,{key:1,modelValue:e.register.cognome,"onUpdate:modelValue":o[2]||(o[2]=o=>e.register.cognome=o),outlined:"",label:"Cognome",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),2==e.state.tipo_utente||3==e.state.tipo_utente?((0,t.wg)(),(0,t.j4)(r,{key:2,modelValue:e.register.codicefiscale,"onUpdate:modelValue":o[3]||(o[3]=o=>e.register.codicefiscale=o),outlined:"",label:"Codice Fiscale",mask:"AAAAAA##A##A###A",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),(0,t.Wm)(c,{modelValue:e.tipotampone,"onUpdate:modelValue":o[4]||(o[4]=o=>e.tipotampone=o),outlined:"",label:"Tipo di Tampone",options:e.options,rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","options","rules"]),(0,t.Wm)(c,{modelValue:e.provincia,"onUpdate:modelValue":o[5]||(o[5]=o=>e.provincia=o),outlined:"","emit-value":"","map-options":"",label:"Provincia",options:e.optionsProvince,rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","options","rules"]),(0,t.Wm)(c,{modelValue:e.id_laboratorio,"onUpdate:modelValue":o[6]||(o[6]=o=>e.id_laboratorio=o),outlined:"",label:"Laboratorio","option-value":"uid","option-label":"nome","emit-value":"","map-options":"",options:e.optionsLaboratori,rules:[e=>!!e||"Campo Richiesto"],onFilter:e.getLabs},{option:(0,t.w5)((e=>[(0,t.Wm)(u,e.itemProps,{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,y.zw)(e.opt.nome),1)])),_:2},1024),(0,t.Wm)(m,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,y.zw)(e.opt.citta)+" ("+(0,y.zw)(e.opt.provincia)+")",1)])),_:2},1024),(0,t.Wm)(m,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,y.zw)(e.opt.indirizzo),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","rules","onFilter"]),(0,t.Wm)(b,{modelValue:e.data,"onUpdate:modelValue":o[7]||(o[7]=o=>e.data=o),landscape:e.$q.screen.gt.md,options:e.dateDispo},null,8,["modelValue","landscape","options"])])),_:1}),(0,t.Wm)(d),(0,t.Wm)(g,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(f,{label:"Annulla",color:"grey",flat:""},null,512),[[W]]),(0,t.Wm)(f,{type:"submit",color:"primary",label:"Prenota",flat:""})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["onHide"])}var D=a(1959),q=a(1701),z=a(5616),x=a(5720);const k=(0,t.aZ)({name:"PrenotaTampone",props:{id:{type:String,default:null}},emits:[...q.Z.emits],setup(){const{dialogRef:e,onDialogOK:o,onDialogHide:a}=(0,q.Z)(),l=(0,W.Z)(),i=(0,d.e)(),n=(0,D.iH)(""),r=(0,D.iH)(""),c=(0,D.iH)(""),m=(0,D.iH)(""),p=(0,D.iH)({}),u=(0,D.iH)([]);s.db.collection("province").get().then((e=>{e.forEach((e=>{u.value.push(e.data())}))})),(0,t.YP)(r,(()=>{b.value=[],g.value=[],c.value="",m.value=""}));const b=(0,D.iH)([]),f=(e,o,a)=>{r.value.length<2?a():s.db.collection("users").where("tipo_utente","==",4).where("provincia","==",r.value).get().then((e=>{o((()=>{b.value=[],e.forEach((e=>{b.value.push(e.data())}))}))}))},g=(0,D.iH)([]);(0,t.YP)(c,(async()=>{g.value=[],s.db.collection("calendari").where("id_laboratorio","==",c.value).where("data",">=",x.Z.firestore.Timestamp.fromDate(z.ZP.startOfDate(new Date,"day"))).get().then((e=>{e.forEach((e=>{g.value.push(z.ZP.formatDate(e.data().data.toDate(),"YYYY/MM/DD"))}))})).catch((e=>{console.log(e),g.value=[]}))}));const v=async()=>{if(!m.value||m.value.length<4)l.notify({type:"negative",position:"top",message:"Selezionare una data!"});else try{1==i.value.tipo_utente?await s.db.collection("prenotazioni").add({prenotatoda:i.value.id,tipotampone:n.value,id_laboratorio:c.value,data:x.Z.firestore.Timestamp.fromDate(z.ZP.extractDate(m.value,"YYYY/MM/DD")),nome:i.value.nome,cognome:i.value.cognome,codicefiscale:i.value.cf,confermato:0,esito:null}):await s.db.collection("prenotazioni").add({prenotatoda:i.value.id,tipotampone:n.value,id_laboratorio:c.value,data:x.Z.firestore.Timestamp.fromDate(z.ZP.extractDate(m.value,"YYYY/MM/DD")),nome:p.value.nome,cognome:p.value.cognome,codicefiscale:p.value.codicefiscale,confermato:0,esito:null}),o(),l.notify({type:"positive",position:"top",message:"Prenotazione registrata",forever:!0})}catch(e){l.notify({type:"negative",position:"top",message:"Errore salvataggio Dati!"}),console.log(e)}};return{dateDispo:g,dialogRef:e,onDialogOK:o,onDialogHide:a,options:["Molecolare","Antigenico"],optionsProvince:u,optionsLaboratori:b,getLabs:f,tipotampone:n,provincia:r,id_laboratorio:c,data:m,doPrenotazione:v,register:p,state:i}}});var P=a(6778),Y=a(151),V=a(8689),Q=a(5589),H=a(5869),M=a(4842),U=a(8516),T=a(3414),A=a(2035),E=a(2350),R=a(6915),I=a(9367),S=a(8240),L=a(677),j=a(7518),N=a.n(j);k.render=C;const O=k;N()(k,"components",{QDialog:P.Z,QCard:Y.Z,QForm:V.Z,QCardSection:Q.Z,QSeparator:H.Z,QInput:M.Z,QSelect:U.Z,QItem:T.Z,QItemSection:A.Z,QItemLabel:E.Z,QDate:R.Z,QCardActions:I.Z,QBtn:S.Z}),N()(k,"directives",{ClosePopup:L.Z});const B=(0,t.Uk)("Minimize"),F=(0,t.Uk)("Maximize"),K=(0,t.Uk)("Close"),$=(0,t.Wm)("div",{class:"text-h4"},"Agenda personale",-1),J={class:"col"},G={class:"q-pa-sd"},X=(0,t.Wm)("div",{class:"text-h6"},"Prenotazioni attive:",-1),ee=(0,t.Wm)("div",{class:"text-h7 text-weight-bold q-pr-xl"},"Campi da visualizzare:",-1),oe={class:"q-pa-sd"},ae=(0,t.Wm)("div",{class:"text-h6"},"Esiti tamponi:",-1),te=(0,t.Wm)("div",{class:"text-h7 text-weight-bold q-pr-xl"},"Campi da visualizzare:",-1);function le(e,o,a,l,i,n){const s=(0,t.up)("q-space"),d=(0,t.up)("q-tooltip"),r=(0,t.up)("q-btn"),c=(0,t.up)("q-bar"),m=(0,t.up)("q-card-section"),p=(0,t.up)("q-select"),u=(0,t.up)("q-table"),b=(0,t.up)("q-card"),f=(0,t.up)("q-dialog"),g=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(f,{ref:"dialogRef",modelValue:e.dialog,"onUpdate:modelValue":o[5]||(o[5]=o=>e.dialog=o),maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down",onHide:e.onDialogHide},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s),(0,t.Wm)(r,{dense:"",flat:"",icon:"minimize",disable:!e.maximizedToggle,onClick:o[1]||(o[1]=o=>e.maximizedToggle=!1)},{default:(0,t.w5)((()=>[e.maximizedToggle?((0,t.wg)(),(0,t.j4)(d,{key:0,class:"bg-white text-primary"},{default:(0,t.w5)((()=>[B])),_:1})):(0,t.kq)("",!0)])),_:1},8,["disable"]),(0,t.Wm)(r,{dense:"",flat:"",icon:"crop_square",disable:e.maximizedToggle,onClick:o[2]||(o[2]=o=>e.maximizedToggle=!0)},{default:(0,t.w5)((()=>[e.maximizedToggle?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(d,{key:0,class:"bg-white text-primary"},{default:(0,t.w5)((()=>[F])),_:1}))])),_:1},8,["disable"]),(0,t.wy)((0,t.Wm)(r,{dense:"",flat:"",icon:"close"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"bg-white text-primary"},{default:(0,t.w5)((()=>[K])),_:1})])),_:1},512),[[g]])])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[$])),_:1}),(0,t.Wm)(m,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",J,[(0,t.Wm)("div",G,[X,(0,t.Wm)(u,{title:"Prenotazioni:",rows:e.prenotazioni,columns:e.colonne1,pagination:{page:1,rowsPerPage:0},"row-key":"id","visible-columns":e.visibleColumns1},{top:(0,t.w5)((()=>[ee,(0,t.Wm)(p,{modelValue:e.visibleColumns1,"onUpdate:modelValue":o[3]||(o[3]=o=>e.visibleColumns1=o),multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.colonne1,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])])),_:1},8,["rows","columns","visible-columns"])]),(0,t.Wm)("div",oe,[ae,(0,t.Wm)(u,{title:"Tamponi Eseguiti:",rows:e.tamponiEseguiti,columns:e.colonne2,pagination:{page:1,rowsPerPage:0},"row-key":"id","visible-columns":e.visibleColumns2},{top:(0,t.w5)((()=>[te,(0,t.Wm)(p,{modelValue:e.visibleColumns2,"onUpdate:modelValue":o[4]||(o[4]=o=>e.visibleColumns2=o),multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.colonne2,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])])),_:1},8,["rows","columns","visible-columns"])])])])),_:1})])),_:1})])),_:1},8,["modelValue","maximized","onHide"])}const ie=(0,t.aZ)({name:"AgendaPersonale",emits:[...q.Z.emits],setup(){const{dialogRef:e,onDialogOK:o,onDialogHide:a}=(0,q.Z)(),t=(0,d.e)(),l=(0,D.iH)([]),i=(0,D.iH)([]),n=[{name:"data",label:"Data",field:"data",align:"left",sortable:!0,sort:(e,o)=>z.ZP.extractDate(e,"DD/MM/YYYY")-z.ZP.extractDate(o,"DD/MM/YYYY")},{name:"codicefiscale",label:"codice fiscale",field:"codicefiscale",sortable:!0,align:"left"},{name:"cognome",label:"cognome",field:"cognome",sortable:!0,align:"left"},{name:"nome",label:"nome",field:"nome",sortable:!0,align:"left"},{name:"laboratorio",label:"laboratorio",field:"laboratorio",sortable:!0,align:"left"},{name:"tipotampone",label:"tipo tampone",field:"tipotampone",sortable:!0,sort:(e,o)=>parseInt(e,10)-parseInt(o,10)}],r=[{name:"data",label:"Data",field:"data",align:"left",sortable:!0,sort:(e,o)=>z.ZP.extractDate(e,"DD/MM/YYYY")-z.ZP.extractDate(o,"DD/MM/YYYY")},{name:"codicefiscale",label:"codice fiscale",field:"codicefiscale",sortable:!0,align:"left"},{name:"cognome",label:"cognome",field:"cognome",sortable:!0,align:"left"},{name:"nome",label:"nome",field:"nome",sortable:!0,align:"left"},{name:"laboratorio",label:"laboratorio",field:"laboratorio",sortable:!0,align:"left"},{name:"esito",label:"esito",field:"esito",sortable:!0,align:"left"},{name:"tipotampone",label:"tipo tampone",field:"tipotampone",sortable:!0,sort:(e,o)=>parseInt(e,10)-parseInt(o,10)}];return s.db.collection("prenotazioni").where("prenotatoda","==",t.value.id).where("confermato","in",[0]).get().then((e=>{e.forEach((e=>{l.value.push({id:e.id,data:z.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:e.data().codicefiscale,nome:e.data().nome,cognome:e.data().cognome,tipotampone:e.data().tipotampone,laboratorio:e.data().id_laboratorio})}))})),s.db.collection("prenotazioni").where("prenotatoda","==",t.value.id).where("confermato","==",1).where("esito","in",[!0,!1]).get().then((e=>{e.forEach((e=>{i.value.push({id:e.id,data:z.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:e.data().codicefiscale,nome:e.data().nome,cognome:e.data().cognome,esito:e.data().esito,tipotampone:e.data().tipotampone,laboratorio:e.data().id_laboratorio})}))})),{visibleColumns1:(0,D.iH)(["codicefiscale","data","laboratorio"]),visibleColumns2:(0,D.iH)(["codicefiscale","data","esito"]),dialog:(0,D.iH)(!1),maximizedToggle:(0,D.iH)(!0),colonne1:n,colonne2:r,prenotazioni:l,tamponiEseguiti:i,dialogRef:e,onDialogOK:o,onDialogHide:a}}});var ne=a(846),se=a(2025),de=a(5363),re=a(4993);ie.render=le;const ce=ie;N()(ie,"components",{QDialog:P.Z,QCard:Y.Z,QBar:ne.Z,QSpace:se.Z,QBtn:S.Z,QTooltip:de.Z,QCardSection:Q.Z,QTable:re.Z,QSelect:U.Z}),N()(ie,"directives",{ClosePopup:L.Z});const me=(0,t.aZ)({name:"CittadinoHome",setup(){const e=(0,W.Z)(),o=()=>{e.dialog({component:O}).onOk((async e=>{}))},a=()=>{e.dialog({component:ce}).onOk((async e=>{}))};return{openPrenota:o,openAgenda:a}}});me.render=h;const pe=me;N()(me,"components",{QBtn:S.Z});const ue={class:"text-center text-h5"},be=(0,t.Uk)(" Laboratorio"),fe={class:"row"},ge={class:"col"},ve={class:"q-pa-md"},we={class:"q-pa-md"},he={class:"col-4"};function We(e,o,a,l,i,n){const s=(0,t.up)("q-icon"),d=(0,t.up)("q-input"),r=(0,t.up)("q-popup-edit"),c=(0,t.up)("q-td"),m=(0,t.up)("q-checkbox"),p=(0,t.up)("q-table"),u=(0,t.up)("q-option-group"),b=(0,t.up)("vue3-chart-js"),f=(0,t.up)("q-btn"),g=(0,t.up)("q-page-sticky");return(0,t.wg)(),(0,t.j4)("div",null,[(0,t.Wm)("p",ue,[(0,t.Wm)(s,{name:"biotech",size:"lg"}),be]),(0,t.Wm)("div",fe,[(0,t.Wm)("div",ge,[(0,t.Wm)("div",ve,[(0,t.Wm)(p,{title:"Da Confermare",rows:e.daConfermare,columns:e.colConfermare,pagination:{page:1,rowsPerPage:0},"row-key":"id","binary-state-sort":"","hide-bottom":"",bordered:"",flat:""},{"body-cell-data":(0,t.w5)((o=>[(0,t.Wm)(c,{props:o},{default:(0,t.w5)((()=>[(0,t.Uk)((0,y.zw)(o.row.data)+" ",1),(0,t.Wm)(r,{modelValue:o.row.data,"onUpdate:modelValue":e=>o.row.data=e,"auto-save":"",onSave:a=>e.updateDataTampone(a,o.row)},{default:(0,t.w5)((e=>[(0,t.Wm)(d,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,mask:"##/##/####",dense:"",autofocus:"",onKeyup:(0,_.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])])),_:2},1032,["props"])])),"body-cell-confermato":(0,t.w5)((o=>[(0,t.Wm)(c,{props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:o.row.confermato,"onUpdate:modelValue":[e=>o.row.confermato=e,a=>e.confermaTampone(o.row)]},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]),(0,t.Wm)("div",we,[(0,t.Wm)(p,{title:"Da Refertare",rows:e.daRefertare,columns:e.colRefertare,pagination:{page:1,rowsPerPage:0},"row-key":"id","binary-state-sort":"","hide-bottom":"",bordered:"",flat:""},{"body-cell-esito":(0,t.w5)((o=>[(0,t.Wm)(c,{props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:o.row.esito,"onUpdate:modelValue":[e=>o.row.esito=e,a=>e.updateEsitoTampone(a,o.row)],options:e.optionsEsito},null,8,["modelValue","onUpdate:modelValue","options"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])]),(0,t.Wm)("div",he,[(0,t.Wm)(b,{id:e.doughnutChart.id,ref:"chartRef",type:e.doughnutChart.type,data:e.doughnutChart.data,options:e.doughnutChart.options},null,8,["id","type","data","options"])])]),(0,t.Wm)(g,{position:"bottom-right",offset:[24,24]},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{fab:"",icon:"date_range",label:"Calendario",to:"/calendario",color:"primary"})])),_:1})])}var _e=a(3671);const ye=(0,t.aZ)({name:"LaboratorioHome",components:{Vue3ChartJs:_e.Z},setup(){const e=(0,d.e)(),o=(0,D.iH)(null),a={id:"doughnut",type:"pie",data:{labels:["Positivi","Negativi"],datasets:[]},options:{responsive:!0,plugins:{}}},l=[{label:"Positivo",value:!0},{label:"Negativo",value:!1}],i=[{name:"data",label:"Data",field:"data",align:"left",sortable:!0,sort:(e,o)=>z.ZP.extractDate(e,"DD/MM/YYYY")-z.ZP.extractDate(o,"DD/MM/YYYY")},{name:"codicefiscale",label:"Cod. Fiscale",field:"codicefiscale",align:"left",sortable:!0},{name:"nome",label:"Nome",field:"nome",align:"left",sortable:!0},{name:"cognome",label:"Cognome",field:"cognome",align:"left",sortable:!0},{name:"confermato",label:"Conferma",field:"confermato",align:"left"}],n=[{name:"data",label:"Data",field:"data",align:"left",sortable:!0,sort:(e,o)=>z.ZP.extractDate(e,"DD/MM/YYYY")-z.ZP.extractDate(o,"DD/MM/YYYY")},{name:"codicefiscale",label:"Cod. Fiscale",field:"codicefiscale",align:"left",sortable:!0},{name:"nome",label:"Nome",field:"nome",align:"left",sortable:!0},{name:"cognome",label:"Cognome",field:"cognome",align:"left",sortable:!0},{name:"esito",label:"Esito",field:"esito",align:"left"}],r=(0,D.iH)([]);s.db.collection("prenotazioni").where("id_laboratorio","==",e.value.id).where("confermato","==",0).orderBy("data","asc").get().then((e=>{e.forEach((e=>{const{nome:o,cognome:a,codicefiscale:t}=e.data();r.value.push({id:e.id,data:z.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:t,nome:o,cognome:a,confermato:!1,esito:null})}))}));const c=(0,D.iH)([]);s.db.collection("prenotazioni").where("id_laboratorio","==",e.value.id).where("confermato","==",1).get().then((e=>{e.forEach((e=>{const{nome:o,cognome:a,codicefiscale:t,esito:l}=e.data();c.value.push({id:e.id,data:z.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:t,nome:o,cognome:a,confermato:!0,esito:l})}))}));const m=async o=>{await s.db.collection("prenotazioni").doc(o.id).update({confermato:1});const a=await s.db.collection("calendari").where("id_laboratorio","==",e.value.id).where("data","==",x.Z.firestore.Timestamp.fromDate(z.ZP.extractDate(o.data,"DD/MM/YYYY"))).get();a.forEach((e=>{s.db.collection("calendari").doc(e.id).update({qta_disponibile:(e.data().qta_disponibile?e.data().qta_disponibile:e.data().qta)-1})}));const t=r.value.findIndex((e=>e.id===o.id));-1!==t&&(r.value.splice(t,1),c.value.push(o))},p=async(e,o)=>{await s.db.collection("prenotazioni").doc(o.id).update({esito:e});const a=r.value.findIndex((e=>e.id===o.id));-1!==a&&(r.value.splice(a,1),c.value.push(o))},u=async(e,o)=>{try{await s.db.collection("prenotazioni").doc(o.id).update({data:x.Z.firestore.Timestamp.fromDate(z.ZP.extractDate(e,"DD/MM/YYYY"))})}catch(a){console.log(a)}};return(0,t.YP)(c,(()=>{console.log(1);const e=c.value.reduce(((e,o)=>e+(!0===o.esito?1:0)),0),t=c.value.reduce(((e,o)=>e+(!1===o.esito?1:0)),0);a.data.datasets=[{backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)"],data:[e,t],hoverOffset:4}],o.value.update(250)}),{deep:!0}),{updateEsitoTampone:p,optionsEsito:l,colConfermare:i,colRefertare:n,daConfermare:r,daRefertare:c,confermaTampone:m,updateDataTampone:u,chartRef:o,doughnutChart:a}}});var Ze=a(4554),Ce=a(3884),De=a(1289),qe=a(5735),ze=a(8870),xe=a(4264);ye.render=We;const ke=ye;N()(ye,"components",{QIcon:Ze.Z,QTable:re.Z,QTd:Ce.Z,QPopupEdit:De.Z,QInput:M.Z,QCheckbox:qe.Z,QOptionGroup:ze.Z,QPageSticky:xe.Z,QBtn:S.Z});const Pe=(0,t.Wm)("h1",null,"Medico",-1),Ye={class:"row justify-evenly"},Ve={class:"col-4"},Qe={class:"col-4"};function He(e,o,a,l,i,n){const s=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)("div",null,[Pe,(0,t.Wm)("div",Ye,[(0,t.Wm)("div",Ve,[(0,t.Wm)(s,{class:"full-width",rounded:"",size:"19px",icon:"add",label:"Nuova Prenotazione",color:"primary",onClick:e.openPrenota},null,8,["onClick"])]),(0,t.Wm)("div",Qe,[(0,t.Wm)(s,{class:"full-width",rounded:"",size:"19px",icon:"book",label:"Agenda personale",color:"primary",onClick:e.openAgenda},null,8,["onClick"])])])])}const Me=(0,t.aZ)({name:"MedicoHome",setup(){const e=(0,W.Z)(),o=()=>{e.dialog({component:O}).onOk((async e=>{}))},a=()=>{e.dialog({component:ce}).onOk((async e=>{}))};return{openPrenota:o,openAgenda:a}}});Me.render=He;const Ue=Me;N()(Me,"components",{QBtn:S.Z});const Te={class:"text-center text-h5"},Ae=(0,t.Uk)(" Laboratorio"),Ee={class:"q-py-md"},Re={class:"q-py-md"};function Ie(e,o,a,l,i,n){const s=(0,t.up)("q-icon"),d=(0,t.up)("q-btn"),r=(0,t.up)("q-td"),c=(0,t.up)("q-table"),m=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(m,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)("p",Te,[(0,t.Wm)(s,{name:"admin_panel_settings",size:"lg"}),Ae]),(0,t.Wm)("div",Ee,[(0,t.Wm)(c,{title:"Richieste Medici",rows:e.richiesteMed,columns:e.colMedici,pagination:{page:1,rowsPerPage:0},"row-key":"id","binary-state-sort":"","hide-bottom":"",bordered:"",flat:""},{"body-cell-action":(0,t.w5)((o=>[(0,t.Wm)(r,{props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{icon:"done",flat:"",onClick:a=>e.doApprova("med",o.row,!0)},null,8,["onClick"]),(0,t.Wm)(d,{icon:"close",flat:"",onClick:a=>e.doApprova("med",o.row,!1)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]),(0,t.Wm)("div",Re,[(0,t.Wm)(c,{title:"Richieste Laboratori",rows:e.richiesteLab,columns:e.colLab,pagination:{page:1,rowsPerPage:0},"row-key":"id","binary-state-sort":"","hide-bottom":"",bordered:"",flat:""},{"body-cell-action":(0,t.w5)((o=>[(0,t.Wm)(r,{props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{icon:"done",flat:"",onClick:a=>e.doApprova("lab",o.row,!0)},null,8,["onClick"]),(0,t.Wm)(d,{icon:"close",flat:"",onClick:a=>e.doApprova("lab",o.row,!1)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])),_:1})}const Se=(0,t.aZ)({name:"AmministratoreHome",setup(){const e=(0,D.iH)([]),o=(0,D.iH)([]),a=[{name:"nome",label:"Nome",field:"nome",align:"left",sortable:!0},{name:"cognome",label:"Cognome",field:"cognome",align:"left",sortable:!0},{name:"codicemedico",label:"Codice medico",field:"codicemedico",align:"left",sortable:!0},{name:"email",label:"E-Mail",field:"email",align:"left",sortable:!0},{name:"action",label:"Action",align:"left"}],t=[{name:"nome",label:"Nome",field:"nome",align:"left",sortable:!0},{name:"piva",label:"Partita Iva",field:"piva",align:"left",sortable:!0},{name:"citta",label:"Città",field:"citta",align:"left",sortable:!0},{name:"provincia",label:"Prov.",field:"provincia",align:"left",sortable:!0},{name:"cap",label:"CAP",field:"cap",align:"left",sortable:!0},{name:"action",label:"Action",align:"left"}];s.db.collection("users").where("tipo_utente","==",2).where("approvato","==",!1).get().then((o=>{o.forEach((o=>{e.value.push(o.data())}))})),s.db.collection("users").where("tipo_utente","==",4).where("approvato","==",!1).get().then((e=>{e.forEach((e=>{o.value.push(e.data())}))}));const l=async(a,t,l)=>{if(await s.db.collection("users").doc(t.uid).update({approvato:l}),"lab"==a){const e=o.value.findIndex((e=>e.uid===t.uid));-1!==e&&o.value.splice(e,1)}else{const o=e.value.findIndex((e=>e.uid===t.uid));-1!==o&&e.value.splice(o,1)}};return{colMedici:a,colLab:t,richiesteMed:e,richiesteLab:o,doApprova:l}}});var Le=a(4379);Se.render=Ie;const je=Se;N()(Se,"components",{QPage:Le.Z,QIcon:Ze.Z,QTable:re.Z,QTd:Ce.Z,QBtn:S.Z});const Ne={class:"text-center",style:{"font-size":"1.2rem"}},Oe=(0,t.Wm)("br",null,null,-1),Be=(0,t.Uk)("ASL"),Fe=(0,t.Wm)("div",{class:"text-h6 text-center"},"Visualizzazione:",-1),Ke={class:"q-pa-md"},$e=(0,t.Wm)("div",{class:"text-h7 text-weight-bold q-pr-xl"},"Campi da visualizzare:",-1),Je={class:"q-pa-md"},Ge=(0,t.Wm)("div",{class:"text-h7 text-weight-bold q-pr-xl"},"Campi da visualizzare:",-1),Xe={class:"col-4"};function eo(e,o,a,l,i,n){const s=(0,t.up)("q-icon"),d=(0,t.up)("q-separator"),r=(0,t.up)("q-card-section"),c=(0,t.up)("q-tab"),m=(0,t.up)("q-tabs"),p=(0,t.up)("q-th"),u=(0,t.up)("q-select"),b=(0,t.up)("q-table"),f=(0,t.up)("q-tab-panel"),g=(0,t.up)("q-tab-panels"),v=(0,t.up)("q-card"),w=(0,t.up)("vue3-chart-js"),h=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(h,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",Ne,[(0,t.Wm)(s,{name:"local_hospital",size:"md"}),Oe,Be]),(0,t.Wm)(d),(0,t.Wm)(v,{class:"my-card"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"bg-blue-12 text-white"},{default:(0,t.w5)((()=>[Fe])),_:1}),(0,t.Wm)(m,{modelValue:e.tab,"onUpdate:modelValue":o[1]||(o[1]=o=>e.tab=o),class:"bg-blue-12 text-white no-caps"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{label:"dati statistici",name:"one",style:{width:"50%"},icon:"analytics"}),(0,t.Wm)(c,{label:"esito dei tamponi",name:"two",style:{width:"50%"},icon:"view_list"})])),_:1},8,["modelValue"]),(0,t.Wm)(d),(0,t.Wm)(g,{modelValue:e.tab,"onUpdate:modelValue":o[4]||(o[4]=o=>e.tab=o),animated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{name:"one"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",Ke,[(0,t.Wm)(b,{id:"tabellaStatistici",title:"Esiti tamponi:","table-header-class":"bg-blue-12 text-white",rows:e.statistici,columns:e.columns,"row-key":"name","visible-columns":e.visibleColumns},{"header-cell-codicefiscale":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"badge",size:"2em"}),(0,t.Uk)(" "+(0,y.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-data":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"history",size:"2em"}),(0,t.Uk)(" "+(0,y.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-esito":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"coronavirus",size:"2em"}),(0,t.Uk)(" "+(0,y.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-prenotatoda":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"supervisor_account",size:"2em"}),(0,t.Uk)(" "+(0,y.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-laboratorio":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"biotech",size:"2em"}),(0,t.Uk)(" "+(0,y.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-tipotampone":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"text_fields",size:"2em"}),(0,t.Uk)(" "+(0,y.zw)(e.col.label),1)])),_:2},1032,["props"])])),top:(0,t.w5)((()=>[$e,(0,t.Wm)(u,{modelValue:e.visibleColumns,"onUpdate:modelValue":o[2]||(o[2]=o=>e.visibleColumns=o),multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])])),_:1},8,["rows","columns","visible-columns"])])])),_:1}),(0,t.Wm)(f,{name:"two"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",Je,[(0,t.Wm)(b,{id:"tabellaStatistici",title:"Esiti tamponi:","table-header-class":"bg-blue-12 text-white",rows:e.risultati,columns:e.columns,"row-key":"name","visible-columns":e.visibleColumns},{"header-cell-codicefiscale":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"badge",size:"2em"}),(0,t.Uk)(" "+(0,y.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-data":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"history",size:"2em"}),(0,t.Uk)(" "+(0,y.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-esito":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"coronavirus",size:"2em"}),(0,t.Uk)(" "+(0,y.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-prenotatoda":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"supervisor_account",size:"2em"}),(0,t.Uk)(" "+(0,y.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-laboratorio":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"biotech",size:"2em"}),(0,t.Uk)(" "+(0,y.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-tipotampone":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"text_fields",size:"2em"}),(0,t.Uk)(" "+(0,y.zw)(e.col.label),1)])),_:2},1032,["props"])])),top:(0,t.w5)((()=>[Ge,(0,t.Wm)(u,{modelValue:e.visibleColumns,"onUpdate:modelValue":o[3]||(o[3]=o=>e.visibleColumns=o),multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])])),_:1},8,["rows","columns","visible-columns"])])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)("div",Xe,[(0,t.Wm)(w,{id:e.doughnutChart.id,ref:"chartRef",type:e.doughnutChart.type,data:e.doughnutChart.data,options:e.doughnutChart.options},null,8,["id","type","data","options"])])])),_:1})}const oo=(0,t.aZ)({name:"AslHome",components:{Vue3ChartJs:_e.Z},data(){const e=(0,D.iH)(null),o={id:"doughnut",type:"pie",data:{labels:["Positivi","Negativi"],datasets:[]},options:{responsive:!0,plugins:{}}};return{tab:(0,D.iH)("one"),visibleColumns:(0,D.iH)(["codicefiscale","data","esito"]),columns:[{name:"codicefiscale",label:"codice fiscale",field:"codicefiscale",sortable:!0,align:"left"},{name:"cognome",label:"cognome",field:"cognome",sortable:!0,align:"left"},{name:"nome",label:"nome",field:"nome",sortable:!0,align:"left"},{name:"laboratorio",label:"laboratorio",field:"laboratorio",sortable:!0,align:"left"},{name:"data",label:"data",field:"datatampone",sortable:!0,align:"center"},{name:"esito",label:"esito",field:"esito",sortable:!0,align:"left"},{name:"tipotampone",label:"tipo tampone",field:"tipotampone",sortable:!0,sort:(e,o)=>parseInt(e,10)-parseInt(o,10)},{name:"prenotatoda",label:"prenotato da",field:"prenotatoda",sortable:!0,align:"center"}],statistici:[],risultati:[],chartRef:e,doughnutChart:o}},created(){(0,D.iH)([]),(0,D.iH)(null),s.db.collection("prenotazioni").where("confermato","==",1).where("esito","in",[!0,!1]).get().then((e=>{e.forEach((e=>{const o={codicefiscale:e.data().codicefiscale,cognome:e.data().cognome,nome:e.data().nome,laboratorio:e.data().id_laboratorio,datatampone:e.data().data,esito:e.data().esito,tipotampone:e.data().tipotampone,prenotatoda:e.data().prenotatoda};this.statistici.push(o)})),(0,t.YP)(statistici,(()=>{const e=statistici.reduce(((e,o)=>e+(!0===o.esito?1:0)),0),o=statistici.reduce(((e,o)=>e+(!1===o.esito?1:0)),0);doughnutChart.data.datasets=[{backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)"],data:[e,o],hoverOffset:4}],chartRef.value.update(250)}),{deep:!0})})),s.db.collection("prenotazioni").where("confermato","==",1).where("esito","==",!0).get().then((e=>{e.forEach((e=>{const o={codicefiscale:e.data().codicefiscale,cognome:e.data().cognome,nome:e.data().nome,laboratorio:e.data().id_laboratorio,datatampone:e.data().data,esito:e.data().esito,tipotampone:e.data().tipotampone,prenotatoda:e.data().prenotatoda};this.risultati.push(o)}))}))}});var ao=a(7547),to=a(3269),lo=a(5906),io=a(6602),no=a(2414);oo.render=eo;const so=oo;N()(oo,"components",{QPage:Le.Z,QIcon:Ze.Z,QSeparator:H.Z,QCard:Y.Z,QCardSection:Q.Z,QTabs:ao.Z,QTab:to.Z,QTabPanels:lo.Z,QTabPanel:io.Z,QTable:re.Z,QTh:no.Z,QSelect:U.Z});const ro=(0,t.aZ)({name:"PageIndex",components:{NoLoginHome:b,CittadinoHome:pe,MedicoHome:Ue,DatoreHome:Ue,LaboratorioHome:ke,AmministratoreHome:je,AslHome:so},setup(){const{isAuthenticated:e,user:o}=(0,n.a)(s.auth),a=(0,d.e)(),l=(0,t.Fl)((()=>{if(a.value.tipo_utente)switch(a.value.tipo_utente){case 1:return pe;case 2:return Ue;case 3:return Ue;case 4:return ke;case 5:return je;case 6:return so}return b}));return(0,t.m0)((()=>{e.value&&o.value&&o.value.uid&&s.db.collection("users").doc(o.value.uid).get().then((e=>{if(e.exists){const t=e.data();a.value.id=o.value.uid,a.value.nome=t.nome,t.tipo_utente>2?a.value.nomecompleto=t.nome:(a.value.nomecompleto=t.nome+" "+t.cognome,a.value.cognome=t.cognome,a.value.cf=t.codicefiscale),a.value.tipo_utente=t.tipo_utente}}))})),{currentPage:l}}});ro.render=i;const co=ro;N()(ro,"components",{QPage:Le.Z})}}]);