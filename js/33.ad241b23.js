(globalThis["webpackChunktamponati_client"]=globalThis["webpackChunktamponati_client"]||[]).push([[33],{9033:(e,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>Ea});var t=o(3673);const l={class:"full-width sfondoHome"};function i(e,a,o,i,n,s){const r=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(r,{class:"flex",style:{padding:"0px"}},{default:(0,t.w5)((()=>[(0,t.Wm)("section",l,[((0,t.wg)(),(0,t.j4)((0,t.LL)(e.currentPage),{class:"text-white sfondoHomeComponents"}))])])),_:1})}var n=o(1762),s=o(2490),r=o(3245);const m={class:"full-width absolute-center q-pa-lg"},d=(0,t.Wm)("h1",{class:"home"},"TAMPONATI",-1),c=(0,t.Wm)("h3",{class:"home"},"Prenota il tuo tampone presso i laboratori piu vicini a te",-1);function p(e,a,o,l,i,n){return(0,t.wg)(),(0,t.j4)("div",m,[d,c])}const u=(0,t.aZ)({name:"NoLoginHome",setup(){}});u.render=p;const b=u,f=(0,t.Wm)("h1",{style:{"font-size":"calc(40px + 4vw)"}},"Cittadino",-1),g={style:{width:"100%"}},v={style:{width:"50%",float:"left",padding:"20px","min-width":"160px","text-align":"center"}},w={style:{width:"50%",float:"left",padding:"20px","min-width":"130px","text-align":"center"}};function h(e,a,o,l,i,n){const s=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)("div",null,[f,(0,t.Wm)("div",g,[(0,t.Wm)("div",v,[(0,t.Wm)(s,{class:"full-width",rounded:"",style:{"font-size":"min(20px, calc(10px + 2vw))","min-width":"130px","max-width":"500px"},icon:"add",label:"Prenotazione",color:"primary",onClick:e.openPrenota},null,8,["onClick"])]),(0,t.Wm)("div",w,[(0,t.Wm)(s,{class:"full-width",rounded:"",style:{"font-size":"min(20px, calc(10px + 2vw))","min-width":"130px","max-width":"500px"},icon:"book",label:"Agenda personale",color:"primary",onClick:e.openAgenda},null,8,["onClick"])])])])}var W=o(8825),y=o(8880),x=o(2323);const k=(0,t.Wm)("div",{class:"text-h6"},"Prenota Tampone",-1),z=(0,t.Wm)("div",{class:"text-h6"},"Compila Questionario",-1),_=(0,t.Uk)("1) Attualmente Ã¨ malato?"),D=(0,t.Uk)("2) Ha febbre?"),Z=(0,t.Uk)("3) Soffre di allergie al lattice, a qualche cibo, a farmaci o ai componenti del vaccino? "),V=(0,t.Uk)("4) Soffre di malattie cardiache o polmonari, asma, malatte renali, diabete, anemia o altre malattie del sangue? "),Y=(0,t.Uk)("5) Si trova in una condizione di compromissione del sistema immunitario? (Esempio: cancro, leucemia, linfoma, HIV/AIDS, trapianto)? "),q=(0,t.Uk)("6) Negli ultimi 3 mesi, ha assunto farmaci che indeboliscono il sistema immunitario (esempio: cortisone, prednisone o altri steroidi) o farmaci antitumorali, oppure ha subito trattamenti con radiazioni? ");function C(e,a,o,l,i,n){const s=(0,t.up)("q-card-section"),r=(0,t.up)("q-separator"),m=(0,t.up)("q-input"),d=(0,t.up)("q-select"),c=(0,t.up)("q-item-label"),p=(0,t.up)("q-item-section"),u=(0,t.up)("q-item"),b=(0,t.up)("q-date"),f=(0,t.up)("text-subtitle1"),g=(0,t.up)("q-option-group"),v=(0,t.up)("q-btn"),w=(0,t.up)("q-card-actions"),h=(0,t.up)("q-form"),W=(0,t.up)("q-card"),C=(0,t.up)("q-dialog"),P=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(C,{ref:"dialogRef",onHide:e.onDialogHide},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{class:"q-dialog-plugin",style:{width:"480px","max-width":"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{onSubmit:(0,y.iM)(e.doPrenotazione,["prevent"])},{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[k])),_:1}),(0,t.Wm)(r),(0,t.Wm)(s,{class:"col q-gutter-md"},{default:(0,t.w5)((()=>[2==e.state.tipo_utente||3==e.state.tipo_utente?((0,t.wg)(),(0,t.j4)(m,{key:0,modelValue:e.register.nome,"onUpdate:modelValue":a[1]||(a[1]=a=>e.register.nome=a),outlined:"",label:"Nome",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),2==e.state.tipo_utente||3==e.state.tipo_utente?((0,t.wg)(),(0,t.j4)(m,{key:1,modelValue:e.register.cognome,"onUpdate:modelValue":a[2]||(a[2]=a=>e.register.cognome=a),outlined:"",label:"Cognome",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),2==e.state.tipo_utente||3==e.state.tipo_utente?((0,t.wg)(),(0,t.j4)(m,{key:2,modelValue:e.register.codicefiscale,"onUpdate:modelValue":a[3]||(a[3]=a=>e.register.codicefiscale=a),outlined:"",label:"Codice Fiscale",mask:"AAAAAA##A##A###A",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),(0,t.Wm)(d,{modelValue:e.tipotampone,"onUpdate:modelValue":a[4]||(a[4]=a=>e.tipotampone=a),outlined:"",label:"Tipo di Tampone",options:e.options,rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","options","rules"]),(0,t.Wm)(d,{modelValue:e.provincia,"onUpdate:modelValue":a[5]||(a[5]=a=>e.provincia=a),outlined:"","emit-value":"","map-options":"",label:"Provincia",options:e.optionsProvince,rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","options","rules"]),(0,t.Wm)(d,{modelValue:e.id_laboratorio,"onUpdate:modelValue":a[6]||(a[6]=a=>e.id_laboratorio=a),outlined:"",label:"Laboratorio","option-value":"uid","option-label":"nome","emit-value":"","map-options":"",options:e.optionsLaboratori,rules:[e=>!!e||"Campo Richiesto"],onFilter:e.getLabs},{option:(0,t.w5)((e=>[(0,t.Wm)(u,e.itemProps,{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,x.zw)(e.opt.nome),1)])),_:2},1024),(0,t.Wm)(c,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,x.zw)(e.opt.citta)+" ("+(0,x.zw)(e.opt.provincia)+")",1)])),_:2},1024),(0,t.Wm)(c,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,x.zw)(e.opt.indirizzo),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","rules","onFilter"]),(0,t.Wm)(b,{modelValue:e.data,"onUpdate:modelValue":a[7]||(a[7]=a=>e.data=a),landscape:e.$q.screen.gt.md,options:e.dateDispo},null,8,["modelValue","landscape","options"]),1==e.state.tipo_utente||3==e.state.tipo_utente?((0,t.wg)(),(0,t.j4)(d,{key:3,modelValue:e.register.pagamento,"onUpdate:modelValue":a[8]||(a[8]=a=>e.register.pagamento=a),outlined:"",label:"Tipo di Pagamento",options:e.optionsPayment,rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","options","rules"])):(0,t.kq)("",!0),"Online"==e.register.pagamento?((0,t.wg)(),(0,t.j4)(m,{key:4,modelValue:e.register.nomeintestatario,"onUpdate:modelValue":a[9]||(a[9]=a=>e.register.nomeintestatario=a),outlined:"",label:"Nome intestatario della carta",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),"Online"==e.register.pagamento?((0,t.wg)(),(0,t.j4)(m,{key:5,modelValue:e.register.numerocarta,"onUpdate:modelValue":a[10]||(a[10]=a=>e.register.numerocarta=a),outlined:"",label:"Numero carta",mask:"#### #### #### ####",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),"Online"==e.register.pagamento?((0,t.wg)(),(0,t.j4)(m,{key:6,modelValue:e.register.datascadenza,"onUpdate:modelValue":a[11]||(a[11]=a=>e.register.datascadenza=a),outlined:"",label:"Data scadenza",mask:"##/##",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),"Online"==e.register.pagamento?((0,t.wg)(),(0,t.j4)(m,{key:7,modelValue:e.register.cvv,"onUpdate:modelValue":a[12]||(a[12]=a=>e.register.cvv=a),outlined:"",label:"CVV",mask:"###",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[z])),_:1}),(0,t.Wm)(r),(0,t.Wm)(s,{class:"q-ma-xs"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[_])),_:1}),(0,t.Wm)(g,{modelValue:e.register.malato,"onUpdate:modelValue":a[13]||(a[13]=a=>e.register.malato=a),name:"malato",options:e.option,color:"primary",inline:""},null,8,["modelValue","options"]),(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[D])),_:1}),(0,t.Wm)(g,{modelValue:e.register.febbre,"onUpdate:modelValue":a[14]||(a[14]=a=>e.register.febbre=a),name:"febbre",options:e.option,color:"primary",inline:""},null,8,["modelValue","options"]),(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[Z])),_:1}),(0,t.Wm)(g,{modelValue:e.register.allergie,"onUpdate:modelValue":a[15]||(a[15]=a=>e.register.allergie=a),name:"allergie",options:e.option,color:"primary",inline:""},null,8,["modelValue","options"]),(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[V])),_:1}),(0,t.Wm)(g,{modelValue:e.register.malattieGravi,"onUpdate:modelValue":a[16]||(a[16]=a=>e.register.malattieGravi=a),name:"malattieGravi",options:e.option,color:"primary",inline:""},null,8,["modelValue","options"]),(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[Y])),_:1}),(0,t.Wm)(g,{modelValue:e.register.compromissioniSistema,"onUpdate:modelValue":a[17]||(a[17]=a=>e.register.compromissioniSistema=a),name:"compromissioni sistema immunitario",options:e.option,color:"primary",inline:""},null,8,["modelValue","options"]),(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[q])),_:1}),(0,t.Wm)(g,{modelValue:e.register.assunzioneFarmaci,"onUpdate:modelValue":a[18]||(a[18]=a=>e.register.assunzioneFarmaci=a),name:"farmaci",options:e.option,color:"primary",inline:""},null,8,["modelValue","options"])])),_:1}),(0,t.Wm)(r),(0,t.Wm)(w,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(v,{label:"Annulla",color:"grey",flat:""},null,512),[[P]]),(0,t.Wm)(v,{type:"submit",color:"primary",label:"Prenota",flat:""})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["onHide"])}var P=o(1959),U=o(1701),M=o(5616),Q=o(5720);const H=(0,t.aZ)({name:"PrenotaTampone",props:{id:{type:String,default:null}},emits:[...U.Z.emits],setup(){const{dialogRef:e,onDialogOK:a,onDialogHide:o}=(0,U.Z)(),l=(0,W.Z)(),i=(0,r.e)(),n=(0,P.iH)(""),m=(0,P.iH)(""),d=(0,P.iH)(""),c=(0,P.iH)(""),p=(0,P.iH)({}),u=(0,P.iH)([]);s.db.collection("province").get().then((e=>{e.forEach((e=>{u.value.push(e.data())}))})),(0,t.YP)(m,(()=>{b.value=[],g.value=[],d.value="",c.value=""}));const b=(0,P.iH)([]),f=(e,a,o)=>{m.value.length<2?o():s.db.collection("users").where("tipo_utente","==",4).where("provincia","==",m.value).get().then((e=>{a((()=>{b.value=[],e.forEach((e=>{b.value.push(e.data())}))}))}))},g=(0,P.iH)([]);(0,t.YP)(d,(async()=>{g.value=[],s.db.collection("calendari").where("id_laboratorio","==",d.value).where("data",">=",Q.Z.firestore.Timestamp.fromDate(M.ZP.startOfDate(new Date,"day"))).get().then((e=>{e.forEach((e=>{g.value.push(M.ZP.formatDate(e.data().data.toDate(),"YYYY/MM/DD"))}))})).catch((e=>{console.log(e),g.value=[]}))}));const v=async()=>{if(!c.value||c.value.length<4)l.notify({type:"negative",position:"top",message:"Selezionare una data!"});else try{1==i.value.tipo_utente?"Online"==p.value.pagamento?await s.db.collection("prenotazioni").add({prenotatoda:i.value.id,tipotampone:n.value,id_laboratorio:d.value,data:Q.Z.firestore.Timestamp.fromDate(M.ZP.extractDate(c.value,"YYYY/MM/DD")),nome:i.value.nome,cognome:i.value.cognome,codicefiscale:i.value.cf,nomeintestatario:p.value.nomeintestatario,numerocarta:p.value.numerocarta,datascadenza:p.value.datascadenza,cvv:p.value.cvv,confermato:0,esito:null,malato:p.value.malato,febbre:p.value.febbre,allergie:p.value.allergie,malattieGravi:p.value.malattieGravi,compromissioniSistema:p.value.compromissioniSistema,assunzioneFarmaci:p.value.assunzioneFarmaci}):await s.db.collection("prenotazioni").add({prenotatoda:i.value.id,tipotampone:n.value,id_laboratorio:d.value,data:Q.Z.firestore.Timestamp.fromDate(M.ZP.extractDate(c.value,"YYYY/MM/DD")),nome:i.value.nome,cognome:i.value.cognome,codicefiscale:i.value.cf,confermato:0,esito:null,malato:p.value.malato,febbre:p.value.febbre,allergie:p.value.allergie,malattieGravi:p.value.malattieGravi,compromissioniSistema:p.value.compromissioniSistema,assunzioneFarmaci:p.value.assunzioneFarmaci}):2==i.value.tipo_utente?await s.db.collection("prenotazioni").add({prenotatoda:i.value.id,tipotampone:n.value,id_laboratorio:d.value,data:Q.Z.firestore.Timestamp.fromDate(M.ZP.extractDate(c.value,"YYYY/MM/DD")),nome:p.value.nome,cognome:p.value.cognome,codicefiscale:p.value.codicefiscale,confermato:0,esito:null,malato:p.value.malato,febbre:p.value.febbre,allergie:p.value.allergie,malattieGravi:p.value.malattieGravi,compromissioniSistema:p.value.compromissioniSistema,assunzioneFarmaci:p.value.assunzioneFarmaci}):3==i.value.tipo_utente&&("Online"==p.value.pagamento?await s.db.collection("prenotazioni").add({prenotatoda:i.value.id,tipotampone:n.value,id_laboratorio:d.value,data:Q.Z.firestore.Timestamp.fromDate(M.ZP.extractDate(c.value,"YYYY/MM/DD")),nome:p.value.nome,cognome:p.value.cognome,codicefiscale:p.value.codicefiscale,nomeintestatario:p.value.nomeintestatario,numerocarta:p.value.numerocarta,datascadenza:p.value.datascadenza,cvv:p.value.cvv,confermato:0,esito:null,malato:p.value.malato,febbre:p.value.febbre,allergie:p.value.allergie,malattieGravi:p.value.malattieGravi,compromissioniSistema:p.value.compromissioniSistema,assunzioneFarmaci:p.value.assunzioneFarmaci}):await s.db.collection("prenotazioni").add({prenotatoda:i.value.id,tipotampone:n.value,id_laboratorio:d.value,data:Q.Z.firestore.Timestamp.fromDate(M.ZP.extractDate(c.value,"YYYY/MM/DD")),nome:p.value.nome,cognome:p.value.cognome,codicefiscale:p.value.codicefiscale,confermato:0,esito:null,malato:p.value.malato,febbre:p.value.febbre,allergie:p.value.allergie,malattieGravi:p.value.malattieGravi,compromissioniSistema:p.value.compromissioniSistema,assunzioneFarmaci:p.value.assunzioneFarmaci})),a(),l.notify({type:"positive",position:"top",message:"Prenotazione registrata",forever:!0})}catch(e){l.notify({type:"negative",position:"top",message:"Errore salvataggio Dati!"}),console.log(e)}};return{dateDispo:g,dialogRef:e,onDialogOK:a,onDialogHide:o,options:["Molecolare","Antigenico"],optionsProvince:u,optionsLaboratori:b,optionsPayment:["Online","In Struttura"],option:[{label:"Si",value:!0},{label:"No",value:!1},{label:"Non lo so",value:null}],getLabs:f,tipotampone:n,provincia:m,id_laboratorio:d,data:c,doPrenotazione:v,register:p,state:i}}});var T=o(6778),A=o(151),S=o(8689),E=o(5589),j=o(5869),R=o(4842),I=o(8516),N=o(3414),L=o(2035),O=o(2350),F=o(6915),G=o(8758),B=o(9367),$=o(8240),K=o(677),J=o(7518),X=o.n(J);H.render=C;const ee=H;X()(H,"components",{QDialog:T.Z,QCard:A.Z,QForm:S.Z,QCardSection:E.Z,QSeparator:j.Z,QInput:R.Z,QSelect:I.Z,QItem:N.Z,QItemSection:L.Z,QItemLabel:O.Z,QDate:F.Z,QOptionGroup:G.Z,QCardActions:B.Z,QBtn:$.Z}),X()(H,"directives",{ClosePopup:K.Z});const ae=(0,t.Uk)("Minimize"),oe=(0,t.Uk)("Maximize"),te=(0,t.Uk)("Close"),le=(0,t.Wm)("div",{class:"text-h4"},"Agenda personale",-1),ie={class:"col"},ne={class:"q-pa-sd"},se=(0,t.Wm)("div",{class:"text-h6"},"Prenotazioni attive:",-1),re=(0,t.Wm)("div",{class:"text-h7 text-weight-bold"},"Mostra filtri:",-1),me={class:"q-pa-sd"},de=(0,t.Wm)("div",{class:"text-h6"},"Esiti tamponi:",-1),ce=(0,t.Wm)("div",{class:"text-h7 text-weight-bold"},"Mostra filtri:",-1);function pe(e,a,o,l,i,n){const s=(0,t.up)("q-space"),r=(0,t.up)("q-tooltip"),m=(0,t.up)("q-btn"),d=(0,t.up)("q-bar"),c=(0,t.up)("q-card-section"),p=(0,t.up)("q-icon"),u=(0,t.up)("q-th"),b=(0,t.up)("q-toggle"),f=(0,t.up)("q-select"),g=(0,t.up)("q-table"),v=(0,t.up)("q-card"),w=(0,t.up)("q-dialog"),h=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(w,{ref:"dialogRef",modelValue:e.dialog,"onUpdate:modelValue":a[7]||(a[7]=a=>e.dialog=a),maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down",onHide:e.onDialogHide},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s),(0,t.Wm)(m,{dense:"",flat:"",icon:"minimize",disable:!e.maximizedToggle,onClick:a[1]||(a[1]=a=>e.maximizedToggle=!1)},{default:(0,t.w5)((()=>[e.maximizedToggle?((0,t.wg)(),(0,t.j4)(r,{key:0,class:"bg-white text-primary"},{default:(0,t.w5)((()=>[ae])),_:1})):(0,t.kq)("",!0)])),_:1},8,["disable"]),(0,t.Wm)(m,{dense:"",flat:"",icon:"crop_square",disable:e.maximizedToggle,onClick:a[2]||(a[2]=a=>e.maximizedToggle=!0)},{default:(0,t.w5)((()=>[e.maximizedToggle?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(r,{key:0,class:"bg-white text-primary"},{default:(0,t.w5)((()=>[oe])),_:1}))])),_:1},8,["disable"]),(0,t.wy)((0,t.Wm)(m,{dense:"",flat:"",icon:"close"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"bg-white text-primary"},{default:(0,t.w5)((()=>[te])),_:1})])),_:1},512),[[h]])])),_:1}),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[le])),_:1}),(0,t.Wm)(c,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",ie,[(0,t.Wm)("div",ne,[se,(0,t.Wm)(g,{id:"tabellaAgenda",title:"Prenotazioni:",rows:e.prenotazioni,columns:e.colonne1,pagination:{page:1,rowsPerPage:0},"row-key":"id","visible-columns":e.visibleColumns1},{"header-cell-codicefiscale":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"badge",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-data":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"history",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-laboratorio":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"biotech",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-tipotampone":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"vaccines",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),top:(0,t.w5)((()=>[re,(0,t.Wm)(b,{modelValue:e.value,"onUpdate:modelValue":a[3]||(a[3]=a=>e.value=a),color:"primary","keep-color":"",class:"q-pr-xl"},null,8,["modelValue"]),1==e.value?((0,t.wg)(),(0,t.j4)(f,{key:0,modelValue:e.visibleColumns1,"onUpdate:modelValue":a[4]||(a[4]=a=>e.visibleColumns1=a),label:"Seleziona campi tabella",multiple:"",outlined:"",dense:"","use-chips":"",color:"primary","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.colonne1,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])):(0,t.kq)("",!0)])),_:1},8,["rows","columns","visible-columns"])]),(0,t.Wm)("div",me,[de,(0,t.Wm)(g,{id:"tabellaAgenda",title:"Tamponi Eseguiti:",rows:e.tamponiEseguiti,columns:e.colonne2,pagination:{page:1,rowsPerPage:0},"row-key":"id","visible-columns":e.visibleColumns2},{"header-cell-codicefiscale":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"badge",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-data":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"history",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-esito":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"coronavirus",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-laboratorio":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"biotech",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-tipotampone":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"vaccines",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),top:(0,t.w5)((()=>[ce,(0,t.Wm)(b,{modelValue:e.value2,"onUpdate:modelValue":a[5]||(a[5]=a=>e.value2=a),color:"primary","keep-color":"",class:"q-pr-xl"},null,8,["modelValue"]),1==e.value2?((0,t.wg)(),(0,t.j4)(f,{key:0,modelValue:e.visibleColumns2,"onUpdate:modelValue":a[6]||(a[6]=a=>e.visibleColumns2=a),label:"Seleziona campi tabella",multiple:"","use-input":"",outlined:"","use-chips":"",color:"primary",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.colonne2,"option-value":"name","option-label":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])):(0,t.kq)("",!0)])),_:1},8,["rows","columns","visible-columns"])])])])),_:1})])),_:1})])),_:1},8,["modelValue","maximized","onHide"])}const ue=(0,t.aZ)({name:"AgendaPersonale",emits:[...U.Z.emits],setup(){const{dialogRef:e,onDialogHide:a}=(0,U.Z)(),o=(0,r.e)(),t=(0,P.iH)([]),l=(0,P.iH)([]),i=(0,P.iH)([]),n=[{name:"data",label:"Data",field:"data",align:"left",sortable:!0,sort:(e,a)=>M.ZP.extractDate(e,"DD/MM/YYYY")-M.ZP.extractDate(a,"DD/MM/YYYY")},{name:"codicefiscale",label:"Codice Fiscale",field:"codicefiscale",sortable:!0,align:"left"},{name:"cognome",label:"Cognome",field:"cognome",sortable:!0,align:"left"},{name:"nome",label:"Nome",field:"nome",sortable:!0,align:"left"},{name:"laboratorio",label:"Laboratorio",field:"laboratorio",sortable:!0,align:"left"},{name:"tipotampone",label:"Tipo Tampone",field:"tipotampone",align:"left",sortable:!0,sort:(e,a)=>parseInt(e,10)-parseInt(a,10)}],m=[{name:"data",label:"Data",field:"data",align:"left",sortable:!0,sort:(e,a)=>M.ZP.extractDate(e,"DD/MM/YYYY")-M.ZP.extractDate(a,"DD/MM/YYYY")},{name:"codicefiscale",label:"Codice Fiscale",field:"codicefiscale",sortable:!0,align:"left"},{name:"cognome",label:"Cognome",field:"cognome",sortable:!0,align:"left"},{name:"nome",label:"Nome",field:"nome",sortable:!0,align:"left"},{name:"laboratorio",label:"Laboratorio",field:"laboratorio",sortable:!0,align:"left"},{name:"tipotampone",label:"Tipo Tampone",field:"tipotampone",sortable:!0,align:"left",sort:(e,a)=>parseInt(e,10)-parseInt(a,10)},{name:"esito",label:"Esito",field:"esito",sortable:!0,align:"left"}];(async()=>{const e=await s.db.collection("users").where("tipo_utente","==",4).get();e.forEach((e=>{l.value.push(e.data())}))})();const d=e=>{const a=l.value.find((a=>a.uid===e));return a.nome};return s.db.collection("prenotazioni").where("prenotatoda","==",o.value.id).where("confermato","==",0).get().then((e=>{t.value.push({id:doc.id,data:M.ZP.formatDate(doc.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:doc.data().codicefiscale,nome:doc.data().nome,cognome:doc.data().cognome,laboratorio:d(doc.data().id_laboratorio),tipotampone:doc.data().tipotampone})})),s.db.collection("prenotazioni").where("prenotatoda","==",o.value.id).where("confermato","==",1).where("esito","in",[!0,!1]).get().then((e=>{e.forEach((e=>{i.value.push({id:e.id,data:M.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:e.data().codicefiscale,nome:e.data().nome,cognome:e.data().cognome,laboratorio:d(e.data().id_laboratorio),tipotampone:e.data().tipotampone,esito:1==e.data().esito?"Positivo":"Negativo",prenotatoda:e.data().prenotatoda})}))})),{visibleColumns1:(0,P.iH)(["data","codicefiscale","laboratorio"]),visibleColumns2:(0,P.iH)(["data","codicefiscale","laboratorio","esito"]),dialog:(0,P.iH)(!1),maximizedToggle:(0,P.iH)(!0),colonne1:n,colonne2:m,prenotazioni:t,tamponiEseguiti:i,dialogRef:e,onDialogHide:a,value:(0,P.iH)(!1),value2:(0,P.iH)(!1)}}});var be=o(846),fe=o(2025),ge=o(5363),ve=o(4993),we=o(2414),he=o(4554),We=o(8886);ue.render=pe;const ye=ue;X()(ue,"components",{QDialog:T.Z,QCard:A.Z,QBar:be.Z,QSpace:fe.Z,QBtn:$.Z,QTooltip:ge.Z,QCardSection:E.Z,QTable:ve.Z,QTh:we.Z,QIcon:he.Z,QToggle:We.Z,QSelect:I.Z}),X()(ue,"directives",{ClosePopup:K.Z});const xe=(0,t.aZ)({name:"CittadinoHome",setup(){const e=(0,W.Z)(),a=()=>{e.dialog({component:ee}).onOk((async e=>{}))},o=()=>{e.dialog({component:ye}).onOk((async e=>{}))};return{openPrenota:a,openAgenda:o}}});xe.render=h;const ke=xe;X()(xe,"components",{QBtn:$.Z});const ze={class:"text-center text-h5"},_e=(0,t.Uk)(" Laboratorio"),De={class:"row"},Ze={class:"col"},Ve={class:"q-pa-md"},Ye={class:"q-pa-md"},qe={class:"q-pa-md"},Ce={class:"col-4"};function Pe(e,a,o,l,i,n){const s=(0,t.up)("q-icon"),r=(0,t.up)("q-input"),m=(0,t.up)("q-popup-edit"),d=(0,t.up)("q-td"),c=(0,t.up)("q-checkbox"),p=(0,t.up)("q-table"),u=(0,t.up)("q-option-group"),b=(0,t.up)("vue3-chart-js"),f=(0,t.up)("q-btn"),g=(0,t.up)("q-page-sticky");return(0,t.wg)(),(0,t.j4)("div",null,[(0,t.Wm)("p",ze,[(0,t.Wm)(s,{name:"biotech",size:"lg"}),_e]),(0,t.Wm)("div",De,[(0,t.Wm)("div",Ze,[(0,t.Wm)("div",Ve,[(0,t.Wm)(p,{title:"Da Confermare",rows:e.daConfermare,columns:e.colConfermare,pagination:{page:1,rowsPerPage:0},"row-key":"id","binary-state-sort":"","hide-bottom":"",bordered:"",flat:""},{"body-cell-data":(0,t.w5)((a=>[(0,t.Wm)(d,{props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,x.zw)(a.row.data)+" ",1),(0,t.Wm)(m,{modelValue:a.row.data,"onUpdate:modelValue":e=>a.row.data=e,"auto-save":"",onSave:o=>e.updateDataTampone(o,a.row)},{default:(0,t.w5)((e=>[(0,t.Wm)(r,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,mask:"##/##/####",dense:"",autofocus:"",onKeyup:(0,y.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])])),_:2},1032,["props"])])),"body-cell-confermato":(0,t.w5)((a=>[(0,t.Wm)(d,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:a.row.confermato,"onUpdate:modelValue":[e=>a.row.confermato=e,o=>e.confermaTampone(a.row)]},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]),(0,t.Wm)("div",Ye,[(0,t.Wm)(p,{title:"Da Refertare",rows:e.daRefertare,columns:e.colRefertare,pagination:{page:1,rowsPerPage:0},"row-key":"id","binary-state-sort":"","hide-bottom":"",bordered:"",flat:""},{"body-cell-esito":(0,t.w5)((a=>[(0,t.Wm)(d,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:a.row.esito,"onUpdate:modelValue":[e=>a.row.esito=e,o=>e.updateEsitoTampone(o,a.row)],options:e.optionsEsito},null,8,["modelValue","onUpdate:modelValue","options"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]),(0,t.Wm)("div",qe,[(0,t.Wm)(p,{title:"Refertati",rows:e.refertati,columns:e.colRefertare,pagination:{page:1,rowsPerPage:4},"row-key":"id","binary-state-sort":"",bordered:"",flat:""},{"body-cell-esito":(0,t.w5)((a=>[(0,t.Wm)(d,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:a.row.esito,"onUpdate:modelValue":[e=>a.row.esito=e,o=>e.updateEsitoTampone(o,a.row)],options:e.optionsEsito},null,8,["modelValue","onUpdate:modelValue","options"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])]),(0,t.Wm)("div",Ce,[(0,t.Wm)(b,{id:e.doughnutChart.id,ref:"chartRef",type:e.doughnutChart.type,data:e.doughnutChart.data,options:e.doughnutChart.options,style:{"font-color":"white"}},null,8,["id","type","data","options"])])]),(0,t.Wm)(g,{position:"bottom-right",offset:[24,24]},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{fab:"",icon:"date_range",label:"Calendario",to:"/calendario",color:"primary"})])),_:1}),(0,t.Wm)(g,{position:"bottom-right",offset:[24,95]},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{fab:"",icon:"date_range",label:"Questionari",color:"primary",onClick:e.openQuestionari},null,8,["onClick"])])),_:1})])}var Ue=o(3671),Me=o(5599);const Qe=(0,t.aZ)({name:"LaboratorioHome",components:{Vue3ChartJs:Ue.Z},setup(){const e=(0,r.e)(),a=(0,P.iH)(null),o=(0,W.Z)(),l=()=>{o.dialog({component:Me.default}).onOk((async e=>{}))},i={id:"doughnut",type:"pie",data:{labels:["Positivi","Negativi"],datasets:[]},options:{responsive:!0,plugins:{}}},n=[{label:"Positivo",value:!0},{label:"Negativo",value:!1}],m=[{name:"data",label:"Data",field:"data",align:"left",sortable:!0,sort:(e,a)=>M.ZP.extractDate(e,"DD/MM/YYYY")-M.ZP.extractDate(a,"DD/MM/YYYY")},{name:"codicefiscale",label:"Cod. Fiscale",field:"codicefiscale",align:"left",sortable:!0},{name:"nome",label:"Nome",field:"nome",align:"left",sortable:!0},{name:"cognome",label:"Cognome",field:"cognome",align:"left",sortable:!0},{name:"confermato",label:"Conferma",field:"confermato",align:"left"}],d=[{name:"data",label:"Data",field:"data",align:"left",sortable:!0,sort:(e,a)=>M.ZP.extractDate(e,"DD/MM/YYYY")-M.ZP.extractDate(a,"DD/MM/YYYY")},{name:"codicefiscale",label:"Cod. Fiscale",field:"codicefiscale",align:"left",sortable:!0},{name:"nome",label:"Nome",field:"nome",align:"left",sortable:!0},{name:"cognome",label:"Cognome",field:"cognome",align:"left",sortable:!0},{name:"esito",label:"Esito",field:"esito",align:"left"}],c=(0,P.iH)([]);s.db.collection("prenotazioni").where("id_laboratorio","==",e.value.id).where("confermato","==",0).orderBy("data","asc").get().then((e=>{e.forEach((e=>{const{nome:a,cognome:o,codicefiscale:t}=e.data();c.value.push({id:e.id,data:M.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:t,nome:a,cognome:o,confermato:!1,esito:null})}))}));const p=(0,P.iH)([]);s.db.collection("prenotazioni").where("id_laboratorio","==",e.value.id).where("confermato","==",1).where("esito","==",null).get().then((e=>{e.forEach((e=>{const{nome:a,cognome:o,codicefiscale:t,esito:l}=e.data();p.value.push({id:e.id,data:M.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:t,nome:a,cognome:o,confermato:!0,esito:l})}))}));const u=(0,P.iH)([]);s.db.collection("prenotazioni").where("id_laboratorio","==",e.value.id).where("confermato","==",1).where("esito","in",[!0,!1]).get().then((e=>{e.forEach((e=>{const{nome:a,cognome:o,codicefiscale:t,esito:l}=e.data();u.value.push({id:e.id,data:M.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:t,nome:a,cognome:o,confermato:!0,esito:l})}))}));const b=async a=>{await s.db.collection("prenotazioni").doc(a.id).update({confermato:1});const o=await s.db.collection("calendari").where("id_laboratorio","==",e.value.id).where("data","==",Q.Z.firestore.Timestamp.fromDate(M.ZP.extractDate(a.data,"DD/MM/YYYY"))).get();o.forEach((e=>{s.db.collection("calendari").doc(e.id).update({qta_disponibile:(e.data().qta_disponibile?e.data().qta_disponibile:e.data().qta)-1})}));const t=c.value.findIndex((e=>e.id===a.id));-1!==t&&(c.value.splice(t,1),p.value.push(a))},f=async(e,a)=>{await s.db.collection("prenotazioni").doc(a.id).update({esito:e});const o=p.value.findIndex((e=>e.id===a.id));-1!==o&&(p.value.splice(o,1),u.value.push(a))},g=async(e,a)=>{try{await s.db.collection("prenotazioni").doc(a.id).update({data:Q.Z.firestore.Timestamp.fromDate(M.ZP.extractDate(e,"DD/MM/YYYY"))})}catch(o){console.log(o)}};return(0,t.YP)(u,(()=>{console.log(1);const e=u.value.reduce(((e,a)=>e+(!0===a.esito?1:0)),0),o=u.value.reduce(((e,a)=>e+(!1===a.esito?1:0)),0);i.data.datasets=[{backgroundColor:["rgb(255, 99, 132)","rgb(29, 116, 206)"],data:[e,o],hoverOffset:4}],a.value.update(250)}),{deep:!0}),{updateEsitoTampone:f,optionsEsito:n,colConfermare:m,colRefertare:d,daConfermare:c,daRefertare:p,refertati:u,confermaTampone:b,updateDataTampone:g,chartRef:a,doughnutChart:i,openQuestionari:l}}});var He=o(3884),Te=o(1289),Ae=o(5735),Se=o(4264);Qe.render=Pe;const Ee=Qe;X()(Qe,"components",{QIcon:he.Z,QTable:ve.Z,QTd:He.Z,QPopupEdit:Te.Z,QInput:R.Z,QCheckbox:Ae.Z,QOptionGroup:G.Z,QPageSticky:Se.Z,QBtn:$.Z});const je=(0,t.Wm)("h1",{style:{"font-size":"calc(40px + 4vw)"}},"Medico",-1),Re={style:{width:"100%"}},Ie={style:{width:"50%",float:"left",padding:"20px","min-width":"160px","text-align":"center"}},Ne={style:{width:"50%",float:"left",padding:"20px","min-width":"130px","text-align":"center"}};function Le(e,a,o,l,i,n){const s=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)("div",null,[je,(0,t.Wm)("div",Re,[(0,t.Wm)("div",Ie,[(0,t.Wm)(s,{class:"full-width",rounded:"",style:{"font-size":"min(20px,calc(10px + 2vw))","min-width":"130px","max-width":"500px"},icon:"add",label:"Prenotazione",color:"primary",onClick:e.openPrenota},null,8,["onClick"])]),(0,t.Wm)("div",Ne,[(0,t.Wm)(s,{class:"full-width",rounded:"",style:{"font-size":"min(20px,calc(10px + 2vw))","min-width":"130px","max-width":"500px"},icon:"book",label:"Agenda personale",color:"primary",onClick:e.openAgenda},null,8,["onClick"])])])])}const Oe=(0,t.aZ)({name:"MedicoHome",setup(){const e=(0,W.Z)(),a=()=>{e.dialog({component:ee}).onOk((async e=>{}))},o=()=>{e.dialog({component:ye}).onOk((async e=>{}))};return{openPrenota:a,openAgenda:o}}});Oe.render=Le;const Fe=Oe;X()(Oe,"components",{QBtn:$.Z});const Ge=(0,t.Wm)("h1",{style:{"font-size":"calc(40px + 4vw)"}},"Datore di Lavoro",-1),Be={style:{width:"100%"}},$e={style:{width:"50%",float:"left",padding:"20px","min-width":"160px","text-align":"center"}},Ke={style:{width:"50%",float:"left",padding:"20px","min-width":"130px","text-align":"center"}};function Je(e,a,o,l,i,n){const s=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)("div",null,[Ge,(0,t.Wm)("div",Be,[(0,t.Wm)("div",$e,[(0,t.Wm)(s,{class:"full-width",rounded:"",style:{"font-size":"min(20px, calc(10px + 2vw))","min-width":"130px","max-width":"500px"},icon:"add",label:"Prenotazione",color:"primary",onClick:e.openPrenota},null,8,["onClick"])]),(0,t.Wm)("div",Ke,[(0,t.Wm)(s,{class:"full-width",rounded:"",style:{"font-size":"min(20px, calc(10px + 2vw))","min-width":"130px","max-width":"500px"},icon:"book",label:"Agenda personale",color:"primary",onClick:e.openAgenda},null,8,["onClick"])])])])}const Xe=(0,t.aZ)({name:"DatoreHome",setup(){const e=(0,W.Z)(),a=()=>{e.dialog({component:ee}).onOk((async e=>{}))},o=()=>{e.dialog({component:ye}).onOk((async e=>{}))};return{openPrenota:a,openAgenda:o}}});Xe.render=Je;const ea=Xe;X()(Xe,"components",{QBtn:$.Z,QPageSticky:Se.Z});const aa={class:"text-center text-h5"},oa=(0,t.Uk)(" Amministratore"),ta={class:"q-py-md"},la={class:"q-py-md"};function ia(e,a,o,l,i,n){const s=(0,t.up)("q-icon"),r=(0,t.up)("q-btn"),m=(0,t.up)("q-td"),d=(0,t.up)("q-table"),c=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(c,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)("p",aa,[(0,t.Wm)(s,{name:"admin_panel_settings",size:"lg"}),oa]),(0,t.Wm)("div",ta,[(0,t.Wm)(d,{title:"Richieste Medici",rows:e.richiesteMed,columns:e.colMedici,pagination:{page:1,rowsPerPage:0},"row-key":"id","binary-state-sort":"","hide-bottom":"",bordered:"",flat:""},{"body-cell-action":(0,t.w5)((a=>[(0,t.Wm)(m,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{icon:"done",flat:"",onClick:o=>e.doApprova("med",a.row,!0)},null,8,["onClick"]),(0,t.Wm)(r,{icon:"close",flat:"",onClick:o=>e.doApprova("med",a.row,!1)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]),(0,t.Wm)("div",la,[(0,t.Wm)(d,{title:"Richieste Laboratori",rows:e.richiesteLab,columns:e.colLab,pagination:{page:1,rowsPerPage:0},"row-key":"id","binary-state-sort":"","hide-bottom":"",bordered:"",flat:""},{"body-cell-action":(0,t.w5)((a=>[(0,t.Wm)(m,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{icon:"done",flat:"",onClick:o=>e.doApprova("lab",a.row,!0)},null,8,["onClick"]),(0,t.Wm)(r,{icon:"close",flat:"",onClick:o=>e.doApprova("lab",a.row,!1)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])),_:1})}const na=(0,t.aZ)({name:"AmministratoreHome",setup(){const e=(0,P.iH)([]),a=(0,P.iH)([]),o=[{name:"nome",label:"Nome",field:"nome",align:"left",sortable:!0},{name:"cognome",label:"Cognome",field:"cognome",align:"left",sortable:!0},{name:"codicemedico",label:"Codice medico",field:"codicemedico",align:"left",sortable:!0},{name:"email",label:"E-Mail",field:"email",align:"left",sortable:!0},{name:"action",label:"Action",align:"left"}],t=[{name:"nome",label:"Nome",field:"nome",align:"left",sortable:!0},{name:"piva",label:"Partita Iva",field:"piva",align:"left",sortable:!0},{name:"citta",label:"CittÃ ",field:"citta",align:"left",sortable:!0},{name:"provincia",label:"Prov.",field:"provincia",align:"left",sortable:!0},{name:"cap",label:"CAP",field:"cap",align:"left",sortable:!0},{name:"action",label:"Action",align:"left"}];s.db.collection("users").where("tipo_utente","==",2).where("approvato","==",null).get().then((a=>{a.forEach((a=>{e.value.push(a.data())}))})),s.db.collection("users").where("tipo_utente","==",4).where("approvato","==",null).get().then((e=>{e.forEach((e=>{a.value.push(e.data())}))}));const l=async(o,t,l)=>{if("lab"==o){await s.db.collection("users").doc(t.uid).update({approvato:l});const e=a.value.findIndex((e=>e.uid===t.uid));-1!==e&&a.value.splice(e,1)}else{await s.db.collection("users").doc(t.uid).update({approvato:l});const a=e.value.findIndex((e=>e.uid===t.uid));-1!==a&&e.value.splice(a,1)}};return{colMedici:o,colLab:t,richiesteMed:e,richiesteLab:a,doApprova:l}}});var sa=o(4379);na.render=ia;const ra=na;X()(na,"components",{QPage:sa.Z,QIcon:he.Z,QTable:ve.Z,QTd:He.Z,QBtn:$.Z});const ma={class:"text-center",style:{"font-size":"1.2rem"}},da=(0,t.Wm)("br",null,null,-1),ca=(0,t.Uk)("ASL"),pa=(0,t.Wm)("div",{class:"text-h6 text-center"},"Visualizzazione:",-1),ua={class:"q-pa-md"},ba=(0,t.Wm)("div",{class:"text-h7 text-weight-bold q-pr-xl"},"Mostra filtri:",-1),fa={class:"q-pa-md"},ga=(0,t.Wm)("div",{class:"text-h7 text-weight-bold q-pr-xl"},"Mostra filtri:",-1),va={class:"col-4"};function wa(e,a,o,l,i,n){const s=(0,t.up)("q-icon"),r=(0,t.up)("q-separator"),m=(0,t.up)("q-card-section"),d=(0,t.up)("q-tab"),c=(0,t.up)("q-tabs"),p=(0,t.up)("q-th"),u=(0,t.up)("q-toggle"),b=(0,t.up)("q-select"),f=(0,t.up)("q-table"),g=(0,t.up)("q-tab-panel"),v=(0,t.up)("q-tab-panels"),w=(0,t.up)("q-card"),h=(0,t.up)("vue3-chart-js"),W=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(W,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",ma,[(0,t.Wm)(s,{name:"local_hospital",size:"md"}),da,ca]),(0,t.Wm)(r),(0,t.Wm)(w,{class:"my-card"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"bg-blue-12 text-white"},{default:(0,t.w5)((()=>[pa])),_:1}),(0,t.Wm)(c,{modelValue:e.tab,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tab=a),class:"bg-blue-12 text-white no-caps"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{label:"dati statistici",name:"one",style:{width:"50%"},icon:"analytics"}),(0,t.Wm)(d,{label:"tracciamento positivi",name:"two",style:{width:"50%"},icon:"view_list"})])),_:1},8,["modelValue"]),(0,t.Wm)(r),(0,t.Wm)(v,{modelValue:e.tab,"onUpdate:modelValue":a[6]||(a[6]=a=>e.tab=a),animated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"one"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",ua,[(0,t.Wm)(f,{id:"tabellaAgenda",title:"Esiti tamponi:",rows:e.statistici,columns:e.columns,"row-key":"name","visible-columns":e.visibleColumns},{"header-cell-laboratorio":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"biotech",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-citta":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"location_city",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-data":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"history",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-esito":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"coronavirus",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-tipotampone":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"vaccines",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),top:(0,t.w5)((()=>[ba,(0,t.Wm)(u,{modelValue:e.value,"onUpdate:modelValue":a[2]||(a[2]=a=>e.value=a),color:"primary","keep-color":"",class:"q-pr-xl"},null,8,["modelValue"]),1==e.value?((0,t.wg)(),(0,t.j4)(b,{key:0,modelValue:e.visibleColumns,"onUpdate:modelValue":a[3]||(a[3]=a=>e.visibleColumns=a),label:"Seleziona campi tabella",multiple:"","use-input":"",outlined:"","use-chips":"",color:"primary",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","option-label":"name"},null,8,["modelValue","display-value","options"])):(0,t.kq)("",!0)])),_:1},8,["rows","columns","visible-columns"])])])),_:1}),(0,t.Wm)(g,{name:"two"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",fa,[(0,t.Wm)(f,{id:"tabellaAgenda",title:"Esiti tamponi:",rows:e.risultati,columns:e.columns2,"row-key":"name","visible-columns":e.visibleColumns2},{"header-cell-codicefiscale":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"badge",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-data":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"history",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-esito":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"coronavirus",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-prenotatoda":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"supervisor_account",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-email":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"email",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-laboratorio":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"biotech",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-tipotampone":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"text_fields",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),top:(0,t.w5)((()=>[ga,(0,t.Wm)(u,{modelValue:e.value2,"onUpdate:modelValue":a[4]||(a[4]=a=>e.value2=a),color:"primary","keep-color":"",class:"q-pr-xl"},null,8,["modelValue"]),1==e.value2?((0,t.wg)(),(0,t.j4)(b,{key:0,modelValue:e.visibleColumns2,"onUpdate:modelValue":a[5]||(a[5]=a=>e.visibleColumns2=a),label:"Seleziona campi tabella",multiple:"","use-input":"",outlined:"","use-chips":"",color:"primary",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns2,"option-value":"name","option-label":"name"},null,8,["modelValue","display-value","options"])):(0,t.kq)("",!0)])),_:1},8,["rows","columns","visible-columns"])])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)("div",va,[(0,t.Wm)(h,{id:e.doughnutChart.id,ref:"chartRef",type:e.doughnutChart.type,data:e.doughnutChart.data,options:e.doughnutChart.options},null,8,["id","type","data","options"])])])),_:1})}const ha=(0,t.aZ)({name:"AslHome",components:{Vue3ChartJs:Ue.Z},data(){const e=(0,P.iH)(null),a={id:"doughnut",type:"pie",data:{labels:["Positivi","Negativi"],datasets:[]},options:{responsive:!0,plugins:{}}};return{tab:(0,P.iH)("one"),visibleColumns:(0,P.iH)(["laboratorio","citta","data","esito"]),visibleColumns2:(0,P.iH)(["codicefiscale","data","prenotatoda","email"]),columns:[{name:"laboratorio",label:"laboratorio",field:"laboratorio",sortable:!0,align:"left"},{name:"citta",label:"cittÃ ",field:"citta",sortable:!0,align:"left"},{name:"data",label:"data",field:"datatampone",sortable:!0,align:"center",sortable:!0,sort:(e,a)=>M.ZP.extractDate(e,"DD/MM/YYYY")-M.ZP.extractDate(a,"DD/MM/YYYY")},{name:"esito",label:"esito",field:"esito",sortable:!0,align:"left"},{name:"tipotampone",label:"tipo tampone",field:"tipotampone",sortable:!0,sort:(e,a)=>parseInt(e,10)-parseInt(a,10)}],columns2:[{name:"codicefiscale",label:"codice fiscale",field:"codicefiscale",sortable:!0,align:"left"},{name:"cognome",label:"cognome",field:"cognome",sortable:!0,align:"left"},{name:"nome",label:"nome",field:"nome",sortable:!0,align:"left"},{name:"laboratorio",label:"laboratorio",field:"laboratorio",sortable:!0,align:"left"},{name:"data",label:"data",field:"datatampone",sortable:!0,align:"center",sortable:!0,sort:(e,a)=>M.ZP.extractDate(e,"DD/MM/YYYY")-M.ZP.extractDate(a,"DD/MM/YYYY")},{name:"tipotampone",label:"tipo tampone",field:"tipotampone",sortable:!0,sort:(e,a)=>parseInt(e,10)-parseInt(a,10)},{name:"prenotatoda",label:"prenotato da",field:"prenotatoda",sortable:!0,align:"center"},{name:"email",label:"email utente registrato",field:"email",sortable:!0,align:"left"}],value:(0,P.iH)(!1),value2:(0,P.iH)(!1),statistici:[],risultati:[],chartRef:e,doughnutChart:a}},created(){const e=(0,P.iH)([]);(async()=>{const a=await s.db.collection("users").where("tipo_utente","==",4).get();a.forEach((a=>{e.value.push(a.data())}))})();const a=a=>{const o=e.value.find((e=>e.uid===a));return o.nome},o=a=>{const o=e.value.find((e=>e.uid===a));return o.citta},l=(0,P.iH)([]);s.db.collection("prenotazioni").where("confermato","==",1).where("esito","in",[!0,!1]).get().then((e=>{e.forEach((e=>{const t={codicefiscale:e.data().codicefiscale,cognome:e.data().cognome,nome:e.data().nome,laboratorio:a(e.data().id_laboratorio),datatampone:M.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),esito:1==e.data().esito?"Positivo":"Negativo",tipotampone:e.data().tipotampone,prenotatoda:e.data().prenotatoda,citta:o(e.data().id_laboratorio)};this.statistici.push(t)})),(0,t.YP)(l,(()=>{const e=l.value.reduce(((e,a)=>e+(!0===a.esito?1:0)),0),a=l.value.reduce(((e,a)=>e+(!1===a.esito?1:0)),0);doughnutChart.data.datasets=[{backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)"],data:[e,a],hoverOffset:4}],chartRef.value.update(250)}),{deep:!0})})),s.db.collection("prenotazioni").where("confermato","==",1).where("esito","==",!0).get().then((e=>{e.forEach((e=>{const o={codicefiscale:e.data().codicefiscale,cognome:e.data().cognome,nome:e.data().nome,laboratorio:a(e.data().id_laboratorio),datatampone:M.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),esito:1==e.data().esito?"Positivo":"Negativo",tipotampone:e.data().tipotampone,prenotatoda:e.data().prenotatoda};s.db.collection("users").where("tipo_utente","==",4).where("uid","==",o.laboratorio).get().then((e=>{e.forEach((e=>{o.laboratorio=e.data().nome}))})),s.db.collection("users").where("uid","==",o.prenotatoda).get().then((e=>{e.forEach((e=>{o.prenotatoda=e.data().codicefiscale,o.email=e.data().email}))})),this.risultati.push(o)}))}))}});var Wa=o(7547),ya=o(3269),xa=o(5906),ka=o(6602);ha.render=wa;const za=ha;X()(ha,"components",{QPage:sa.Z,QIcon:he.Z,QSeparator:j.Z,QCard:A.Z,QCardSection:E.Z,QTabs:Wa.Z,QTab:ya.Z,QTabPanels:xa.Z,QTabPanel:ka.Z,QTable:ve.Z,QTh:we.Z,QToggle:We.Z,QSelect:I.Z});const _a={class:"text-center text-h5"},Da=(0,t.Uk)(" Laboratorio"),Za={key:0,class:"text-center text-h6"},Va={key:1,class:"text-center text-h6"};function Ya(e,a,o,l,i,n){const s=(0,t.up)("q-icon");return(0,t.wg)(),(0,t.j4)("div",null,[(0,t.Wm)("p",_a,[(0,t.Wm)(s,{name:"biotech",size:"lg"}),Da]),null==e.state.convenzionato?((0,t.wg)(),(0,t.j4)("p",Za," Non si Ã¨ stati ancora aggiunti alla lista dei laboratori convenzionati. ")):(0,t.kq)("",!0),0==e.state.convenzionato?((0,t.wg)(),(0,t.j4)("p",Va,"Convenzione non concessa")):(0,t.kq)("",!0)])}const qa=(0,t.aZ)({name:"NonConvenzionatoLaboratorio",setup(){const e=(0,r.e)();return{state:e}}});qa.render=Ya;const Ca=qa;X()(qa,"components",{QIcon:he.Z});const Pa={class:"text-center text-h5"},Ua=(0,t.Uk)(" Medico"),Ma={key:0,class:"text-center text-h4"},Qa={key:1,class:"text-center text-h4"};function Ha(e,a,o,l,i,n){const s=(0,t.up)("q-icon");return(0,t.wg)(),(0,t.j4)("div",null,[(0,t.Wm)("p",Pa,[(0,t.Wm)(s,{name:"biotech",size:"lg"}),Ua]),null==e.state.approvato?((0,t.wg)(),(0,t.j4)("p",Ma,"Non si Ã¨ stati ancora aggiunti alla lista dei medici approvati.")):(0,t.kq)("",!0),0==e.state.approvato?((0,t.wg)(),(0,t.j4)("p",Qa,"Approvazione non concessa.")):(0,t.kq)("",!0)])}const Ta=(0,t.aZ)({name:"NonApprovatoMedico",setup(){const e=(0,r.e)();return{state:e}}});Ta.render=Ha;const Aa=Ta;X()(Ta,"components",{QIcon:he.Z});const Sa=(0,t.aZ)({name:"PageIndex",components:{NoLoginHome:b,CittadinoHome:ke,MedicoHome:Fe,DatoreHome:ea,LaboratorioHome:Ee,AmministratoreHome:ra,AslHome:za,NonConvenzionatoLaboratorio:Ca,NonApprovatoMedico:Aa},setup(){const{isAuthenticated:e,user:a}=(0,n.a)(s.auth),o=(0,r.e)(),l=(0,t.Fl)((()=>{if(o.value.tipo_utente)switch(o.value.tipo_utente){case 1:return ke;case 2:return o.value.approvato?Fe:Aa;case 3:return ea;case 4:return o.value.approvato?Ee:Ca;case 5:return ra;case 6:return za}return b}));return(0,t.m0)((()=>{e.value&&a.value&&a.value.uid&&s.db.collection("users").doc(a.value.uid).get().then((e=>{if(e.exists){const t=e.data();o.value.id=a.value.uid,o.value.nome=t.nome,t.tipo_utente>2?o.value.nomecompleto=t.nome:(o.value.nomecompleto=t.nome+" "+t.cognome,o.value.cognome=t.cognome,o.value.cf=t.codicefiscale),o.value.tipo_utente=t.tipo_utente,2!=t.tipo_utente&&4!=t.tipo_utente||(o.value.approvato=t.approvato)}}))})),{currentPage:l}}});Sa.render=i;const Ea=Sa;X()(Sa,"components",{QPage:sa.Z})}}]);