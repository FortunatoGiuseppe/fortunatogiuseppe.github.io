(globalThis["webpackChunktamponati_client"]=globalThis["webpackChunktamponati_client"]||[]).push([[593],{3245:(e,a,o)=>{"use strict";o.d(a,{Z:()=>l,e:()=>i});var t=o(4562);const l={id:null,nomecompleto:"",tipo:null,cf:"",provincia:"",nome:"",cognome:""},i=(0,t.r8)((()=>(0,t.y$)("vue-tamponati",{...l},sessionStorage)))},9593:(e,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>Pa});var t=o(3673);const l={class:"full-width sfondoHome"};function i(e,a,o,i,n,s){const r=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(r,{class:"flex",style:{padding:"0px"}},{default:(0,t.w5)((()=>[(0,t.Wm)("section",l,[((0,t.wg)(),(0,t.j4)((0,t.LL)(e.currentPage),{class:"text-white sfondoHomeComponents"}))])])),_:1})}var n=o(1762),s=o(2490),r=o(3245);const d={class:"full-width absolute-center q-pa-lg"},c=(0,t.Wm)("h1",{class:"home"},"TAMPONATI",-1),m=(0,t.Wm)("h3",{class:"home"},"Prenota il tuo tampone presso i laboratori piu vicini a te",-1);function p(e,a,o,l,i,n){return(0,t.wg)(),(0,t.j4)("div",d,[c,m])}const u=(0,t.aZ)({name:"NoLoginHome",setup(){}});u.render=p;const b=u,f=(0,t.Wm)("h1",{style:{"font-size":"calc(40px + 4vw)"}},"Cittadino",-1),g={style:{width:"100%"}},v={style:{width:"50%",float:"left",padding:"20px","min-width":"160px","text-align":"center"}},w={style:{width:"50%",float:"left",padding:"20px","min-width":"130px","text-align":"center"}};function h(e,a,o,l,i,n){const s=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)("div",null,[f,(0,t.Wm)("div",g,[(0,t.Wm)("div",v,[(0,t.Wm)(s,{class:"full-width",rounded:"",style:{"font-size":"min(20px, calc(10px + 2vw))","min-width":"130px","max-width":"500px"},icon:"add",label:"Prenotazione",color:"primary",onClick:e.openPrenota},null,8,["onClick"])]),(0,t.Wm)("div",w,[(0,t.Wm)(s,{class:"full-width",rounded:"",style:{"font-size":"min(20px, calc(10px + 2vw))","min-width":"130px","max-width":"500px"},icon:"book",label:"Agenda personale",color:"primary",onClick:e.openAgenda},null,8,["onClick"])])])])}var W=o(8825),y=o(8880),x=o(2323);const k=(0,t.Wm)("div",{class:"text-h6"},"Prenota Tampone",-1);function D(e,a,o,l,i,n){const s=(0,t.up)("q-card-section"),r=(0,t.up)("q-separator"),d=(0,t.up)("q-input"),c=(0,t.up)("q-select"),m=(0,t.up)("q-item-label"),p=(0,t.up)("q-item-section"),u=(0,t.up)("q-item"),b=(0,t.up)("q-date"),f=(0,t.up)("q-btn"),g=(0,t.up)("q-card-actions"),v=(0,t.up)("q-form"),w=(0,t.up)("q-card"),h=(0,t.up)("q-dialog"),W=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(h,{ref:"dialogRef",onHide:e.onDialogHide},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"q-dialog-plugin",style:{width:"450px","max-width":"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{onSubmit:(0,y.iM)(e.doPrenotazione,["prevent"])},{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[k])),_:1}),(0,t.Wm)(r),(0,t.Wm)(s,{class:"col q-gutter-md"},{default:(0,t.w5)((()=>[2==e.state.tipo_utente||3==e.state.tipo_utente?((0,t.wg)(),(0,t.j4)(d,{key:0,modelValue:e.register.nome,"onUpdate:modelValue":a[1]||(a[1]=a=>e.register.nome=a),outlined:"",label:"Nome",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),2==e.state.tipo_utente||3==e.state.tipo_utente?((0,t.wg)(),(0,t.j4)(d,{key:1,modelValue:e.register.cognome,"onUpdate:modelValue":a[2]||(a[2]=a=>e.register.cognome=a),outlined:"",label:"Cognome",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),2==e.state.tipo_utente||3==e.state.tipo_utente?((0,t.wg)(),(0,t.j4)(d,{key:2,modelValue:e.register.codicefiscale,"onUpdate:modelValue":a[3]||(a[3]=a=>e.register.codicefiscale=a),outlined:"",label:"Codice Fiscale",mask:"AAAAAA##A##A###A",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),(0,t.Wm)(c,{modelValue:e.tipotampone,"onUpdate:modelValue":a[4]||(a[4]=a=>e.tipotampone=a),outlined:"",label:"Tipo di Tampone",options:e.options,rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","options","rules"]),(0,t.Wm)(c,{modelValue:e.provincia,"onUpdate:modelValue":a[5]||(a[5]=a=>e.provincia=a),outlined:"","emit-value":"","map-options":"",label:"Provincia",options:e.optionsProvince,rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","options","rules"]),(0,t.Wm)(c,{modelValue:e.id_laboratorio,"onUpdate:modelValue":a[6]||(a[6]=a=>e.id_laboratorio=a),outlined:"",label:"Laboratorio","option-value":"uid","option-label":"nome","emit-value":"","map-options":"",options:e.optionsLaboratori,rules:[e=>!!e||"Campo Richiesto"],onFilter:e.getLabs},{option:(0,t.w5)((e=>[(0,t.Wm)(u,e.itemProps,{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,x.zw)(e.opt.nome),1)])),_:2},1024),(0,t.Wm)(m,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,x.zw)(e.opt.citta)+" ("+(0,x.zw)(e.opt.provincia)+")",1)])),_:2},1024),(0,t.Wm)(m,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,x.zw)(e.opt.indirizzo),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","rules","onFilter"]),(0,t.Wm)(b,{modelValue:e.data,"onUpdate:modelValue":a[7]||(a[7]=a=>e.data=a),landscape:e.$q.screen.gt.md,options:e.dateDispo},null,8,["modelValue","landscape","options"]),1==e.state.tipo_utente||3==e.state.tipo_utente?((0,t.wg)(),(0,t.j4)(c,{key:3,modelValue:e.register.pagamento,"onUpdate:modelValue":a[8]||(a[8]=a=>e.register.pagamento=a),outlined:"",label:"Tipo di Pagamento",options:e.optionsPayment,rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","options","rules"])):(0,t.kq)("",!0),"Online"==e.register.pagamento?((0,t.wg)(),(0,t.j4)(d,{key:4,modelValue:e.register.nomeintestatario,"onUpdate:modelValue":a[9]||(a[9]=a=>e.register.nomeintestatario=a),outlined:"",label:"Nome intestatario della carta",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),"Online"==e.register.pagamento?((0,t.wg)(),(0,t.j4)(d,{key:5,modelValue:e.register.numerocarta,"onUpdate:modelValue":a[10]||(a[10]=a=>e.register.numerocarta=a),outlined:"",label:"Numero carta",mask:"#### #### #### ####",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),"Online"==e.register.pagamento?((0,t.wg)(),(0,t.j4)(d,{key:6,modelValue:e.register.datascadenza,"onUpdate:modelValue":a[11]||(a[11]=a=>e.register.datascadenza=a),outlined:"",label:"Data scadenza",mask:"##/##",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0),"Online"==e.register.pagamento?((0,t.wg)(),(0,t.j4)(d,{key:7,modelValue:e.register.cvv,"onUpdate:modelValue":a[12]||(a[12]=a=>e.register.cvv=a),outlined:"",label:"CVV",mask:"###",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(r),(0,t.Wm)(g,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(f,{label:"Annulla",color:"grey",flat:""},null,512),[[W]]),(0,t.Wm)(f,{type:"submit",color:"primary",label:"Prenota",flat:""})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["onHide"])}var z=o(1959),_=o(1701),Z=o(5616),Y=o(5720);const q=(0,t.aZ)({name:"PrenotaTampone",props:{id:{type:String,default:null}},emits:[..._.Z.emits],setup(){const{dialogRef:e,onDialogOK:a,onDialogHide:o}=(0,_.Z)(),l=(0,W.Z)(),i=(0,r.e)(),n=(0,z.iH)(""),d=(0,z.iH)(""),c=(0,z.iH)(""),m=(0,z.iH)(""),p=(0,z.iH)({}),u=(0,z.iH)([]);s.db.collection("province").get().then((e=>{e.forEach((e=>{u.value.push(e.data())}))})),(0,t.YP)(d,(()=>{b.value=[],g.value=[],c.value="",m.value=""}));const b=(0,z.iH)([]),f=(e,a,o)=>{d.value.length<2?o():s.db.collection("users").where("tipo_utente","==",4).where("provincia","==",d.value).get().then((e=>{a((()=>{b.value=[],e.forEach((e=>{b.value.push(e.data())}))}))}))},g=(0,z.iH)([]);(0,t.YP)(c,(async()=>{g.value=[],s.db.collection("calendari").where("id_laboratorio","==",c.value).where("data",">=",Y.Z.firestore.Timestamp.fromDate(Z.ZP.startOfDate(new Date,"day"))).get().then((e=>{e.forEach((e=>{g.value.push(Z.ZP.formatDate(e.data().data.toDate(),"YYYY/MM/DD"))}))})).catch((e=>{console.log(e),g.value=[]}))}));const v=async()=>{if(!m.value||m.value.length<4)l.notify({type:"negative",position:"top",message:"Selezionare una data!"});else try{1==i.value.tipo_utente?"Online"==p.value.pagamento?await s.db.collection("prenotazioni").add({prenotatoda:i.value.id,tipotampone:n.value,id_laboratorio:c.value,data:Y.Z.firestore.Timestamp.fromDate(Z.ZP.extractDate(m.value,"YYYY/MM/DD")),nome:i.value.nome,cognome:i.value.cognome,codicefiscale:i.value.cf,nomeintestatario:p.value.nomeintestatario,numerocarta:p.value.numerocarta,datascadenza:p.value.datascadenza,cvv:p.value.cvv,confermato:0,esito:null}):await s.db.collection("prenotazioni").add({prenotatoda:i.value.id,tipotampone:n.value,id_laboratorio:c.value,data:Y.Z.firestore.Timestamp.fromDate(Z.ZP.extractDate(m.value,"YYYY/MM/DD")),nome:i.value.nome,cognome:i.value.cognome,codicefiscale:i.value.cf,confermato:0,esito:null}):2==i.value.tipo_utente?await s.db.collection("prenotazioni").add({prenotatoda:i.value.id,tipotampone:n.value,id_laboratorio:c.value,data:Y.Z.firestore.Timestamp.fromDate(Z.ZP.extractDate(m.value,"YYYY/MM/DD")),nome:p.value.nome,cognome:p.value.cognome,codicefiscale:p.value.codicefiscale,confermato:0,esito:null}):3==i.value.tipo_utente&&("Online"==p.value.pagamento?await s.db.collection("prenotazioni").add({prenotatoda:i.value.id,tipotampone:n.value,id_laboratorio:c.value,data:Y.Z.firestore.Timestamp.fromDate(Z.ZP.extractDate(m.value,"YYYY/MM/DD")),nome:p.value.nome,cognome:p.value.cognome,codicefiscale:p.value.codicefiscale,nomeintestatario:p.value.nomeintestatario,numerocarta:p.value.numerocarta,datascadenza:p.value.datascadenza,cvv:p.value.cvv,confermato:0,esito:null}):await s.db.collection("prenotazioni").add({prenotatoda:i.value.id,tipotampone:n.value,id_laboratorio:c.value,data:Y.Z.firestore.Timestamp.fromDate(Z.ZP.extractDate(m.value,"YYYY/MM/DD")),nome:p.value.nome,cognome:p.value.cognome,codicefiscale:p.value.codicefiscale,confermato:0,esito:null})),a(),l.notify({type:"positive",position:"top",message:"Prenotazione registrata",forever:!0})}catch(e){l.notify({type:"negative",position:"top",message:"Errore salvataggio Dati!"}),console.log(e)}};return{dateDispo:g,dialogRef:e,onDialogOK:a,onDialogHide:o,options:["Molecolare","Antigenico"],optionsProvince:u,optionsLaboratori:b,optionsPayment:["Online","In Struttura"],getLabs:f,tipotampone:n,provincia:d,id_laboratorio:c,data:m,doPrenotazione:v,register:p,state:i}}});var C=o(6778),V=o(151),P=o(8689),M=o(5589),U=o(5869),Q=o(4842),H=o(8516),T=o(3414),A=o(2035),E=o(2350),j=o(6915),R=o(9367),S=o(8240),I=o(677),L=o(7518),O=o.n(L);q.render=D;const N=q;O()(q,"components",{QDialog:C.Z,QCard:V.Z,QForm:P.Z,QCardSection:M.Z,QSeparator:U.Z,QInput:Q.Z,QSelect:H.Z,QItem:T.Z,QItemSection:A.Z,QItemLabel:E.Z,QDate:j.Z,QCardActions:R.Z,QBtn:S.Z}),O()(q,"directives",{ClosePopup:I.Z});const B=(0,t.Uk)("Minimize"),F=(0,t.Uk)("Maximize"),K=(0,t.Uk)("Close"),$=(0,t.Wm)("div",{class:"text-h4"},"Agenda personale",-1),J={class:"col"},G={class:"q-pa-sd"},X=(0,t.Wm)("div",{class:"text-h6"},"Prenotazioni attive:",-1),ee=(0,t.Wm)("div",{class:"text-h7 text-weight-bold"},"Mostra filtri:",-1),ae={class:"q-pa-sd"},oe=(0,t.Wm)("div",{class:"text-h6"},"Esiti tamponi:",-1),te=(0,t.Wm)("div",{class:"text-h7 text-weight-bold"},"Mostra filtri:",-1);function le(e,a,o,l,i,n){const s=(0,t.up)("q-space"),r=(0,t.up)("q-tooltip"),d=(0,t.up)("q-btn"),c=(0,t.up)("q-bar"),m=(0,t.up)("q-card-section"),p=(0,t.up)("q-icon"),u=(0,t.up)("q-th"),b=(0,t.up)("q-toggle"),f=(0,t.up)("q-select"),g=(0,t.up)("q-table"),v=(0,t.up)("q-card"),w=(0,t.up)("q-dialog"),h=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(w,{ref:"dialogRef",modelValue:e.dialog,"onUpdate:modelValue":a[7]||(a[7]=a=>e.dialog=a),maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down",onHide:e.onDialogHide},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s),(0,t.Wm)(d,{dense:"",flat:"",icon:"minimize",disable:!e.maximizedToggle,onClick:a[1]||(a[1]=a=>e.maximizedToggle=!1)},{default:(0,t.w5)((()=>[e.maximizedToggle?((0,t.wg)(),(0,t.j4)(r,{key:0,class:"bg-white text-primary"},{default:(0,t.w5)((()=>[B])),_:1})):(0,t.kq)("",!0)])),_:1},8,["disable"]),(0,t.Wm)(d,{dense:"",flat:"",icon:"crop_square",disable:e.maximizedToggle,onClick:a[2]||(a[2]=a=>e.maximizedToggle=!0)},{default:(0,t.w5)((()=>[e.maximizedToggle?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(r,{key:0,class:"bg-white text-primary"},{default:(0,t.w5)((()=>[F])),_:1}))])),_:1},8,["disable"]),(0,t.wy)((0,t.Wm)(d,{dense:"",flat:"",icon:"close"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"bg-white text-primary"},{default:(0,t.w5)((()=>[K])),_:1})])),_:1},512),[[h]])])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[$])),_:1}),(0,t.Wm)(m,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",J,[(0,t.Wm)("div",G,[X,(0,t.Wm)(g,{id:"tabellaAgenda",title:"Prenotazioni:",rows:e.prenotazioni,columns:e.colonne1,pagination:{page:1,rowsPerPage:0},"row-key":"id","visible-columns":e.visibleColumns1},{"header-cell-codicefiscale":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"badge",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-data":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"history",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-laboratorio":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"biotech",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-tipotampone":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"vaccines",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),top:(0,t.w5)((()=>[ee,(0,t.Wm)(b,{modelValue:e.value,"onUpdate:modelValue":a[3]||(a[3]=a=>e.value=a),color:"primary","keep-color":"",class:"q-pr-xl"},null,8,["modelValue"]),1==e.value?((0,t.wg)(),(0,t.j4)(f,{key:0,modelValue:e.visibleColumns1,"onUpdate:modelValue":a[4]||(a[4]=a=>e.visibleColumns1=a),label:"Seleziona campi tabella",multiple:"",outlined:"",dense:"","use-chips":"",color:"primary","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.colonne1,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])):(0,t.kq)("",!0)])),_:1},8,["rows","columns","visible-columns"])]),(0,t.Wm)("div",ae,[oe,(0,t.Wm)(g,{id:"tabellaAgenda",title:"Tamponi Eseguiti:",rows:e.tamponiEseguiti,columns:e.colonne2,pagination:{page:1,rowsPerPage:0},"row-key":"id","visible-columns":e.visibleColumns2},{"header-cell-codicefiscale":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"badge",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-data":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"history",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-esito":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"coronavirus",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-laboratorio":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"biotech",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-tipotampone":(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"vaccines",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),top:(0,t.w5)((()=>[te,(0,t.Wm)(b,{modelValue:e.value2,"onUpdate:modelValue":a[5]||(a[5]=a=>e.value2=a),color:"primary","keep-color":"",class:"q-pr-xl"},null,8,["modelValue"]),1==e.value2?((0,t.wg)(),(0,t.j4)(f,{key:0,modelValue:e.visibleColumns2,"onUpdate:modelValue":a[6]||(a[6]=a=>e.visibleColumns2=a),label:"Seleziona campi tabella",multiple:"","use-input":"",outlined:"","use-chips":"",color:"primary",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.colonne2,"option-value":"name","option-label":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])):(0,t.kq)("",!0)])),_:1},8,["rows","columns","visible-columns"])])])])),_:1})])),_:1})])),_:1},8,["modelValue","maximized","onHide"])}const ie=(0,t.aZ)({name:"AgendaPersonale",emits:[..._.Z.emits],setup(){const{dialogRef:e,onDialogOK:a,onDialogHide:o}=(0,_.Z)(),t=(0,r.e)(),l=(0,z.iH)([]),i=(0,z.iH)([]),n=[{name:"data",label:"Data",field:"data",align:"left",sortable:!0,sort:(e,a)=>Z.ZP.extractDate(e,"DD/MM/YYYY")-Z.ZP.extractDate(a,"DD/MM/YYYY")},{name:"codicefiscale",label:"codice fiscale",field:"codicefiscale",sortable:!0,align:"left"},{name:"cognome",label:"cognome",field:"cognome",sortable:!0,align:"left"},{name:"nome",label:"nome",field:"nome",sortable:!0,align:"left"},{name:"laboratorio",label:"laboratorio",field:"laboratorio",sortable:!0,align:"left"},{name:"tipotampone",label:"tipo tampone",field:"tipotampone",sortable:!0}],d=[{name:"data",label:"Data",field:"data",align:"left",sortable:!0,sort:(e,a)=>Z.ZP.extractDate(e,"DD/MM/YYYY")-Z.ZP.extractDate(a,"DD/MM/YYYY")},{name:"codicefiscale",label:"codice fiscale",field:"codicefiscale",sortable:!0,align:"left"},{name:"cognome",label:"cognome",field:"cognome",sortable:!0,align:"left"},{name:"nome",label:"nome",field:"nome",sortable:!0,align:"left"},{name:"laboratorio",label:"laboratorio",field:"laboratorio",sortable:!0,align:"left"},{name:"esito",label:"esito",field:"esito",sortable:!0,align:"left"},{name:"tipotampone",label:"tipo tampone",field:"tipotampone",sortable:!0}];return s.db.collection("prenotazioni").where("prenotatoda","==",t.value.id).where("confermato","in",[0]).get().then((e=>{e.forEach((e=>{const a={id:e.id,data:Z.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:e.data().codicefiscale,nome:e.data().nome,cognome:e.data().cognome,tipotampone:e.data().tipotampone,laboratorio:e.data().id_laboratorio};s.db.collection("users").where("tipo_utente","==",4).where("uid","==",a.laboratorio).get().then((e=>{e.forEach((e=>{a.laboratorio=e.data().nome}))})),l.value.push(a)}))})),s.db.collection("prenotazioni").where("prenotatoda","==",t.value.id).where("confermato","==",1).where("esito","in",[!0,!1]).get().then((e=>{e.forEach((e=>{const a={codicefiscale:e.data().codicefiscale,cognome:e.data().cognome,nome:e.data().nome,laboratorio:e.data().id_laboratorio,data:Z.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),esito:e.data().esito,tipotampone:e.data().tipotampone,prenotatoda:e.data().prenotatoda};1==e.data().esito?a.esito="positivo":a.esito="negativo",s.db.collection("users").where("tipo_utente","==",4).where("uid","==",a.laboratorio).get().then((e=>{e.forEach((e=>{a.laboratorio=e.data().nome}))})),i.value.push(a)}))})),{visibleColumns1:(0,z.iH)(["codicefiscale","data","laboratorio"]),visibleColumns2:(0,z.iH)(["codicefiscale","data","esito"]),dialog:(0,z.iH)(!1),maximizedToggle:(0,z.iH)(!0),colonne1:n,colonne2:d,prenotazioni:l,tamponiEseguiti:i,dialogRef:e,onDialogOK:a,onDialogHide:o,value:(0,z.iH)(!1),value2:(0,z.iH)(!1)}}});var ne=o(846),se=o(2025),re=o(5363),de=o(4993),ce=o(2414),me=o(4554),pe=o(8886);ie.render=le;const ue=ie;O()(ie,"components",{QDialog:C.Z,QCard:V.Z,QBar:ne.Z,QSpace:se.Z,QBtn:S.Z,QTooltip:re.Z,QCardSection:M.Z,QTable:de.Z,QTh:ce.Z,QIcon:me.Z,QToggle:pe.Z,QSelect:H.Z}),O()(ie,"directives",{ClosePopup:I.Z});const be=(0,t.aZ)({name:"CittadinoHome",setup(){const e=(0,W.Z)(),a=()=>{e.dialog({component:N}).onOk((async e=>{}))},o=()=>{e.dialog({component:ue}).onOk((async e=>{}))};return{openPrenota:a,openAgenda:o}}});be.render=h;const fe=be;O()(be,"components",{QBtn:S.Z});const ge={class:"text-center text-h5"},ve=(0,t.Uk)(" Laboratorio"),we={class:"row"},he={class:"col"},We={class:"q-pa-md"},ye={class:"q-pa-md"},xe={class:"q-pa-md"},ke={class:"col-4"};function De(e,a,o,l,i,n){const s=(0,t.up)("q-icon"),r=(0,t.up)("q-input"),d=(0,t.up)("q-popup-edit"),c=(0,t.up)("q-td"),m=(0,t.up)("q-checkbox"),p=(0,t.up)("q-table"),u=(0,t.up)("q-option-group"),b=(0,t.up)("vue3-chart-js"),f=(0,t.up)("q-btn"),g=(0,t.up)("q-page-sticky");return(0,t.wg)(),(0,t.j4)("div",null,[(0,t.Wm)("p",ge,[(0,t.Wm)(s,{name:"biotech",size:"lg"}),ve]),(0,t.Wm)("div",we,[(0,t.Wm)("div",he,[(0,t.Wm)("div",We,[(0,t.Wm)(p,{title:"Da Confermare",rows:e.daConfermare,columns:e.colConfermare,pagination:{page:1,rowsPerPage:0},"row-key":"id","binary-state-sort":"","hide-bottom":"",bordered:"",flat:""},{"body-cell-data":(0,t.w5)((a=>[(0,t.Wm)(c,{props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,x.zw)(a.row.data)+" ",1),(0,t.Wm)(d,{modelValue:a.row.data,"onUpdate:modelValue":e=>a.row.data=e,"auto-save":"",onSave:o=>e.updateDataTampone(o,a.row)},{default:(0,t.w5)((e=>[(0,t.Wm)(r,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,mask:"##/##/####",dense:"",autofocus:"",onKeyup:(0,y.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])])),_:2},1032,["props"])])),"body-cell-confermato":(0,t.w5)((a=>[(0,t.Wm)(c,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:a.row.confermato,"onUpdate:modelValue":[e=>a.row.confermato=e,o=>e.confermaTampone(a.row)]},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]),(0,t.Wm)("div",ye,[(0,t.Wm)(p,{title:"Da Refertare",rows:e.daRefertare,columns:e.colRefertare,pagination:{page:1,rowsPerPage:0},"row-key":"id","binary-state-sort":"","hide-bottom":"",bordered:"",flat:""},{"body-cell-esito":(0,t.w5)((a=>[(0,t.Wm)(c,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:a.row.esito,"onUpdate:modelValue":[e=>a.row.esito=e,o=>e.updateEsitoTampone(o,a.row)],options:e.optionsEsito},null,8,["modelValue","onUpdate:modelValue","options"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]),(0,t.Wm)("div",xe,[(0,t.Wm)(p,{title:"Refertati",rows:e.refertati,columns:e.colRefertare,pagination:{page:1,rowsPerPage:4},"row-key":"id","binary-state-sort":"",bordered:"",flat:""},{"body-cell-esito":(0,t.w5)((a=>[(0,t.Wm)(c,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:a.row.esito,"onUpdate:modelValue":[e=>a.row.esito=e,o=>e.updateEsitoTampone(o,a.row)],options:e.optionsEsito},null,8,["modelValue","onUpdate:modelValue","options"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])]),(0,t.Wm)("div",ke,[(0,t.Wm)(b,{id:e.doughnutChart.id,ref:"chartRef",type:e.doughnutChart.type,data:e.doughnutChart.data,options:e.doughnutChart.options,style:{"font-color":"white"}},null,8,["id","type","data","options"])])]),(0,t.Wm)(g,{position:"bottom-right",offset:[24,24]},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{fab:"",icon:"date_range",label:"Calendario",to:"/calendario",color:"primary"})])),_:1})])}var ze=o(3671);const _e=(0,t.aZ)({name:"LaboratorioHome",components:{Vue3ChartJs:ze.Z},setup(){const e=(0,r.e)(),a=(0,z.iH)(null),o={id:"doughnut",type:"pie",data:{labels:["Positivi","Negativi"],datasets:[]},options:{responsive:!0,plugins:{}}},l=[{label:"Positivo",value:!0},{label:"Negativo",value:!1}],i=[{name:"data",label:"Data",field:"data",align:"left",sortable:!0,sort:(e,a)=>Z.ZP.extractDate(e,"DD/MM/YYYY")-Z.ZP.extractDate(a,"DD/MM/YYYY")},{name:"codicefiscale",label:"Cod. Fiscale",field:"codicefiscale",align:"left",sortable:!0},{name:"nome",label:"Nome",field:"nome",align:"left",sortable:!0},{name:"cognome",label:"Cognome",field:"cognome",align:"left",sortable:!0},{name:"confermato",label:"Conferma",field:"confermato",align:"left"}],n=[{name:"data",label:"Data",field:"data",align:"left",sortable:!0,sort:(e,a)=>Z.ZP.extractDate(e,"DD/MM/YYYY")-Z.ZP.extractDate(a,"DD/MM/YYYY")},{name:"codicefiscale",label:"Cod. Fiscale",field:"codicefiscale",align:"left",sortable:!0},{name:"nome",label:"Nome",field:"nome",align:"left",sortable:!0},{name:"cognome",label:"Cognome",field:"cognome",align:"left",sortable:!0},{name:"esito",label:"Esito",field:"esito",align:"left"}],d=(0,z.iH)([]);s.db.collection("prenotazioni").where("id_laboratorio","==",e.value.id).where("confermato","==",0).orderBy("data","asc").get().then((e=>{e.forEach((e=>{const{nome:a,cognome:o,codicefiscale:t}=e.data();d.value.push({id:e.id,data:Z.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:t,nome:a,cognome:o,confermato:!1,esito:null})}))}));const c=(0,z.iH)([]);s.db.collection("prenotazioni").where("id_laboratorio","==",e.value.id).where("confermato","==",1).where("esito","==",null).get().then((e=>{e.forEach((e=>{const{nome:a,cognome:o,codicefiscale:t,esito:l}=e.data();c.value.push({id:e.id,data:Z.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:t,nome:a,cognome:o,confermato:!0,esito:l})}))}));const m=(0,z.iH)([]);s.db.collection("prenotazioni").where("id_laboratorio","==",e.value.id).where("confermato","==",1).where("esito","in",[!0,!1]).get().then((e=>{e.forEach((e=>{const{nome:a,cognome:o,codicefiscale:t,esito:l}=e.data();m.value.push({id:e.id,data:Z.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),codicefiscale:t,nome:a,cognome:o,confermato:!0,esito:l})}))}));const p=async a=>{await s.db.collection("prenotazioni").doc(a.id).update({confermato:1});const o=await s.db.collection("calendari").where("id_laboratorio","==",e.value.id).where("data","==",Y.Z.firestore.Timestamp.fromDate(Z.ZP.extractDate(a.data,"DD/MM/YYYY"))).get();o.forEach((e=>{s.db.collection("calendari").doc(e.id).update({qta_disponibile:(e.data().qta_disponibile?e.data().qta_disponibile:e.data().qta)-1})}));const t=d.value.findIndex((e=>e.id===a.id));-1!==t&&(d.value.splice(t,1),c.value.push(a))},u=async(e,a)=>{await s.db.collection("prenotazioni").doc(a.id).update({esito:e});const o=c.value.findIndex((e=>e.id===a.id));-1!==o&&(c.value.splice(o,1),m.value.push(a))},b=async(e,a)=>{try{await s.db.collection("prenotazioni").doc(a.id).update({data:Y.Z.firestore.Timestamp.fromDate(Z.ZP.extractDate(e,"DD/MM/YYYY"))})}catch(o){console.log(o)}};return(0,t.YP)(m,(()=>{console.log(1);const e=m.value.reduce(((e,a)=>e+(!0===a.esito?1:0)),0),t=m.value.reduce(((e,a)=>e+(!1===a.esito?1:0)),0);o.data.datasets=[{backgroundColor:["rgb(255, 99, 132)","rgb(29, 116, 206)"],data:[e,t],hoverOffset:4}],a.value.update(250)}),{deep:!0}),{updateEsitoTampone:u,optionsEsito:l,colConfermare:i,colRefertare:n,daConfermare:d,daRefertare:c,refertati:m,confermaTampone:p,updateDataTampone:b,chartRef:a,doughnutChart:o}}});var Ze=o(3884),Ye=o(1289),qe=o(5735),Ce=o(8758),Ve=o(4264);_e.render=De;const Pe=_e;O()(_e,"components",{QIcon:me.Z,QTable:de.Z,QTd:Ze.Z,QPopupEdit:Ye.Z,QInput:Q.Z,QCheckbox:qe.Z,QOptionGroup:Ce.Z,QPageSticky:Ve.Z,QBtn:S.Z});const Me=(0,t.Wm)("h1",{style:{"font-size":"calc(40px + 4vw)"}},"Medico",-1),Ue={style:{width:"100%"}},Qe={style:{width:"50%",float:"left",padding:"20px","min-width":"160px","text-align":"center"}},He={style:{width:"50%",float:"left",padding:"20px","min-width":"130px","text-align":"center"}};function Te(e,a,o,l,i,n){const s=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)("div",null,[Me,(0,t.Wm)("div",Ue,[(0,t.Wm)("div",Qe,[(0,t.Wm)(s,{class:"full-width",rounded:"",style:{"font-size":"min(20px,calc(10px + 2vw))","min-width":"130px","max-width":"500px"},icon:"add",label:"Prenotazione",color:"primary",onClick:e.openPrenota},null,8,["onClick"])]),(0,t.Wm)("div",He,[(0,t.Wm)(s,{class:"full-width",rounded:"",style:{"font-size":"min(20px,calc(10px + 2vw))","min-width":"130px","max-width":"500px"},icon:"book",label:"Agenda personale",color:"primary",onClick:e.openAgenda},null,8,["onClick"])])])])}const Ae=(0,t.aZ)({name:"MedicoHome",setup(){const e=(0,W.Z)(),a=()=>{e.dialog({component:N}).onOk((async e=>{}))},o=()=>{e.dialog({component:ue}).onOk((async e=>{}))};return{openPrenota:a,openAgenda:o}}});Ae.render=Te;const Ee=Ae;O()(Ae,"components",{QBtn:S.Z});const je=(0,t.Wm)("h1",{style:{"font-size":"calc(40px + 4vw)"}},"Datore di Lavoro",-1),Re={style:{width:"50%",float:"left",padding:"20px","min-width":"160px","text-align":"center"}},Se={class:"col-4"},Ie={style:{width:"50%",float:"left",padding:"20px","min-width":"130px","text-align":"center"}};function Le(e,a,o,l,i,n){const s=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.j4)("div",null,[je,(0,t.Wm)("div",Re,[(0,t.Wm)("div",Se,[(0,t.Wm)(s,{class:"full-width",rounded:"",style:{"font-size":"min(20px,calc(10px + 2vw))","min-width":"130px","max-width":"500px"},icon:"add",label:"Prenotazione",color:"primary",onClick:e.openPrenota},null,8,["onClick"])]),(0,t.Wm)("div",Ie,[(0,t.Wm)(s,{class:"full-width",rounded:"",style:{"font-size":"min(20px,calc(10px + 2vw))","min-width":"130px","max-width":"500px"},icon:"book",label:"Agenda personale",color:"primary",onClick:e.openAgenda},null,8,["onClick"])])])])}const Oe=(0,t.aZ)({name:"DatoreHome",setup(){const e=(0,W.Z)(),a=()=>{e.dialog({component:N}).onOk((async e=>{}))},o=()=>{e.dialog({component:ue}).onOk((async e=>{}))};return{openPrenota:a,openAgenda:o}}});Oe.render=Le;const Ne=Oe;O()(Oe,"components",{QPageSticky:Ve.Z,QBtn:S.Z});const Be={class:"text-center text-h5"},Fe=(0,t.Uk)(" Amministratore"),Ke={class:"q-py-md"},$e={class:"q-py-md"};function Je(e,a,o,l,i,n){const s=(0,t.up)("q-icon"),r=(0,t.up)("q-btn"),d=(0,t.up)("q-td"),c=(0,t.up)("q-table"),m=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(m,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)("p",Be,[(0,t.Wm)(s,{name:"admin_panel_settings",size:"lg"}),Fe]),(0,t.Wm)("div",Ke,[(0,t.Wm)(c,{title:"Richieste Medici",rows:e.richiesteMed,columns:e.colMedici,pagination:{page:1,rowsPerPage:0},"row-key":"id","binary-state-sort":"","hide-bottom":"",bordered:"",flat:""},{"body-cell-action":(0,t.w5)((a=>[(0,t.Wm)(d,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{icon:"done",flat:"",onClick:o=>e.doApprova("med",a.row,!0)},null,8,["onClick"]),(0,t.Wm)(r,{icon:"close",flat:"",onClick:o=>e.doApprova("med",a.row,!1)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]),(0,t.Wm)("div",$e,[(0,t.Wm)(c,{title:"Richieste Laboratori",rows:e.richiesteLab,columns:e.colLab,pagination:{page:1,rowsPerPage:0},"row-key":"id","binary-state-sort":"","hide-bottom":"",bordered:"",flat:""},{"body-cell-action":(0,t.w5)((a=>[(0,t.Wm)(d,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{icon:"done",flat:"",onClick:o=>e.doApprova("lab",a.row,!0)},null,8,["onClick"]),(0,t.Wm)(r,{icon:"close",flat:"",onClick:o=>e.doApprova("lab",a.row,!1)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])),_:1})}const Ge=(0,t.aZ)({name:"AmministratoreHome",setup(){const e=(0,z.iH)([]),a=(0,z.iH)([]),o=[{name:"nome",label:"Nome",field:"nome",align:"left",sortable:!0},{name:"cognome",label:"Cognome",field:"cognome",align:"left",sortable:!0},{name:"codicemedico",label:"Codice medico",field:"codicemedico",align:"left",sortable:!0},{name:"email",label:"E-Mail",field:"email",align:"left",sortable:!0},{name:"action",label:"Action",align:"left"}],t=[{name:"nome",label:"Nome",field:"nome",align:"left",sortable:!0},{name:"piva",label:"Partita Iva",field:"piva",align:"left",sortable:!0},{name:"citta",label:"Città",field:"citta",align:"left",sortable:!0},{name:"provincia",label:"Prov.",field:"provincia",align:"left",sortable:!0},{name:"cap",label:"CAP",field:"cap",align:"left",sortable:!0},{name:"action",label:"Action",align:"left"}];s.db.collection("users").where("tipo_utente","==",2).where("approvato","==",null).get().then((a=>{a.forEach((a=>{e.value.push(a.data())}))})),s.db.collection("users").where("tipo_utente","==",4).where("convenzionato","==",null).get().then((e=>{e.forEach((e=>{a.value.push(e.data())}))}));const l=async(o,t,l)=>{if("lab"==o){await s.db.collection("users").doc(t.uid).update({approvato:l});const e=a.value.findIndex((e=>e.uid===t.uid));-1!==e&&a.value.splice(e,1)}else{await s.db.collection("users").doc(t.uid).update({approvato:l});const a=e.value.findIndex((e=>e.uid===t.uid));-1!==a&&e.value.splice(a,1)}};return{colMedici:o,colLab:t,richiesteMed:e,richiesteLab:a,doApprova:l}}});var Xe=o(4379);Ge.render=Je;const ea=Ge;O()(Ge,"components",{QPage:Xe.Z,QIcon:me.Z,QTable:de.Z,QTd:Ze.Z,QBtn:S.Z});const aa={class:"text-center",style:{"font-size":"1.2rem"}},oa=(0,t.Wm)("br",null,null,-1),ta=(0,t.Uk)("ASL"),la=(0,t.Wm)("div",{class:"text-h6 text-center"},"Visualizzazione:",-1),ia={class:"q-pa-md"},na=(0,t.Wm)("div",{class:"text-h7 text-weight-bold q-pr-xl"},"Mostra filtri:",-1),sa={class:"q-pa-md"},ra=(0,t.Wm)("div",{class:"text-h7 text-weight-bold q-pr-xl"},"Mostra filtri:",-1),da={class:"col-4"};function ca(e,a,o,l,i,n){const s=(0,t.up)("q-icon"),r=(0,t.up)("q-separator"),d=(0,t.up)("q-card-section"),c=(0,t.up)("q-tab"),m=(0,t.up)("q-tabs"),p=(0,t.up)("q-th"),u=(0,t.up)("q-toggle"),b=(0,t.up)("q-select"),f=(0,t.up)("q-table"),g=(0,t.up)("q-tab-panel"),v=(0,t.up)("q-tab-panels"),w=(0,t.up)("q-card"),h=(0,t.up)("vue3-chart-js"),W=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(W,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",aa,[(0,t.Wm)(s,{name:"local_hospital",size:"md"}),oa,ta]),(0,t.Wm)(r),(0,t.Wm)(w,{class:"my-card"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"bg-blue-12 text-white"},{default:(0,t.w5)((()=>[la])),_:1}),(0,t.Wm)(m,{modelValue:e.tab,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tab=a),class:"bg-blue-12 text-white no-caps"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{label:"dati statistici",name:"one",style:{width:"50%"},icon:"analytics"}),(0,t.Wm)(c,{label:"tracciamento positivi",name:"two",style:{width:"50%"},icon:"view_list"})])),_:1},8,["modelValue"]),(0,t.Wm)(r),(0,t.Wm)(v,{modelValue:e.tab,"onUpdate:modelValue":a[6]||(a[6]=a=>e.tab=a),animated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"one"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",ia,[(0,t.Wm)(f,{id:"tabellaAgenda",title:"Esiti tamponi:",rows:e.statistici,columns:e.columns,"row-key":"name","visible-columns":e.visibleColumns},{"header-cell-codicefiscale":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"badge",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-data":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"history",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-esito":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"coronavirus",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-prenotatoda":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"supervisor_account",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-laboratorio":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"biotech",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-tipotampone":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"vaccines",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),top:(0,t.w5)((()=>[na,(0,t.Wm)(u,{modelValue:e.value,"onUpdate:modelValue":a[2]||(a[2]=a=>e.value=a),color:"primary","keep-color":"",class:"q-pr-xl"},null,8,["modelValue"]),1==e.value?((0,t.wg)(),(0,t.j4)(b,{key:0,modelValue:e.visibleColumns,"onUpdate:modelValue":a[3]||(a[3]=a=>e.visibleColumns=a),label:"Seleziona campi tabella",multiple:"","use-input":"",outlined:"","use-chips":"",color:"primary",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","option-label":"name"},null,8,["modelValue","display-value","options"])):(0,t.kq)("",!0)])),_:1},8,["rows","columns","visible-columns"])])])),_:1}),(0,t.Wm)(g,{name:"two"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",sa,[(0,t.Wm)(f,{id:"tabellaAgenda",title:"Esiti tamponi:",rows:e.risultati,columns:e.columns2,"row-key":"name","visible-columns":e.visibleColumns2},{"header-cell-codicefiscale":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"badge",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-data":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"history",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-esito":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"coronavirus",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-prenotatoda":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"supervisor_account",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-email":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"email",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-laboratorio":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"biotech",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),"header-cell-tipotampone":(0,t.w5)((e=>[(0,t.Wm)(p,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"text_fields",size:"2em"}),(0,t.Uk)(" "+(0,x.zw)(e.col.label),1)])),_:2},1032,["props"])])),top:(0,t.w5)((()=>[ra,(0,t.Wm)(u,{modelValue:e.value2,"onUpdate:modelValue":a[4]||(a[4]=a=>e.value2=a),color:"primary","keep-color":"",class:"q-pr-xl"},null,8,["modelValue"]),1==e.value2?((0,t.wg)(),(0,t.j4)(b,{key:0,modelValue:e.visibleColumns2,"onUpdate:modelValue":a[5]||(a[5]=a=>e.visibleColumns2=a),label:"Seleziona campi tabella",multiple:"","use-input":"",outlined:"","use-chips":"",color:"primary",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns2,"option-value":"name","option-label":"name"},null,8,["modelValue","display-value","options"])):(0,t.kq)("",!0)])),_:1},8,["rows","columns","visible-columns"])])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)("div",da,[(0,t.Wm)(h,{id:e.doughnutChart.id,ref:"chartRef",type:e.doughnutChart.type,data:e.doughnutChart.data,options:e.doughnutChart.options},null,8,["id","type","data","options"])])])),_:1})}const ma=(0,t.aZ)({name:"AslHome",components:{Vue3ChartJs:ze.Z},data(){const e=(0,z.iH)(null),a={id:"doughnut",type:"pie",data:{labels:["Positivi","Negativi"],datasets:[]},options:{responsive:!0,plugins:{}}};return{tab:(0,z.iH)("one"),visibleColumns:(0,z.iH)(["laboratorio","data","esito"]),visibleColumns2:(0,z.iH)(["codicefiscale","data","prenotatoda","email"]),columns:[{name:"laboratorio",label:"laboratorio",field:"laboratorio",sortable:!0,align:"left"},{name:"data",label:"data",field:"datatampone",sortable:!0,align:"center",sortable:!0,sort:(e,a)=>Z.ZP.extractDate(e,"DD/MM/YYYY")-Z.ZP.extractDate(a,"DD/MM/YYYY")},{name:"esito",label:"esito",field:"esito",sortable:!0,align:"left"},{name:"tipotampone",label:"tipo tampone",field:"tipotampone",sortable:!0,sort:(e,a)=>parseInt(e,10)-parseInt(a,10)}],columns2:[{name:"codicefiscale",label:"codice fiscale",field:"codicefiscale",sortable:!0,align:"left"},{name:"cognome",label:"cognome",field:"cognome",sortable:!0,align:"left"},{name:"nome",label:"nome",field:"nome",sortable:!0,align:"left"},{name:"laboratorio",label:"laboratorio",field:"laboratorio",sortable:!0,align:"left"},{name:"data",label:"data",field:"datatampone",sortable:!0,align:"center",sortable:!0,sort:(e,a)=>Z.ZP.extractDate(e,"DD/MM/YYYY")-Z.ZP.extractDate(a,"DD/MM/YYYY")},{name:"tipotampone",label:"tipo tampone",field:"tipotampone",sortable:!0,sort:(e,a)=>parseInt(e,10)-parseInt(a,10)},{name:"prenotatoda",label:"prenotato da",field:"prenotatoda",sortable:!0,align:"center"},{name:"email",label:"email utente registrato",field:"email",sortable:!0,align:"left"}],value:(0,z.iH)(!1),value2:(0,z.iH)(!1),statistici:[],risultati:[],chartRef:e,doughnutChart:a}},created(){(0,z.iH)([]),(0,z.iH)(null),s.db.collection("prenotazioni").where("confermato","==",1).where("esito","in",[!0,!1]).get().then((e=>{e.forEach((e=>{const a={codicefiscale:e.data().codicefiscale,cognome:e.data().cognome,nome:e.data().nome,laboratorio:e.data().id_laboratorio,datatampone:Z.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),esito:e.data().esito,tipotampone:e.data().tipotampone,prenotatoda:e.data().prenotatoda};1==e.data().esito?a.esito="positivo":a.esito="negativo",s.db.collection("users").where("tipo_utente","==",4).where("uid","==",a.laboratorio).get().then((e=>{e.forEach((e=>{a.laboratorio=e.data().nome}))})),this.statistici.push(a)})),(0,t.YP)(statistici,(()=>{const e=statistici.reduce(((e,a)=>e+(!0===a.esito?1:0)),0),a=statistici.reduce(((e,a)=>e+(!1===a.esito?1:0)),0);doughnutChart.data.datasets=[{backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)"],data:[e,a],hoverOffset:4}],chartRef.value.update(250)}),{deep:!0})})),s.db.collection("prenotazioni").where("confermato","==",1).where("esito","==",!0).get().then((e=>{e.forEach((e=>{const a={codicefiscale:e.data().codicefiscale,cognome:e.data().cognome,nome:e.data().nome,laboratorio:e.data().id_laboratorio,datatampone:Z.ZP.formatDate(e.data().data.toDate(),"DD/MM/YYYY"),esito:e.data().esito,tipotampone:e.data().tipotampone,prenotatoda:e.data().prenotatoda};1==e.data().esito?a.esito="positivo":a.esito="negativo",s.db.collection("users").where("tipo_utente","==",4).where("uid","==",a.laboratorio).get().then((e=>{e.forEach((e=>{a.laboratorio=e.data().nome}))})),s.db.collection("users").where("uid","==",a.prenotatoda).get().then((e=>{e.forEach((e=>{a.email=e.data().email}))})),this.risultati.push(a)}))}))}});var pa=o(7547),ua=o(3269),ba=o(5906),fa=o(6602);ma.render=ca;const ga=ma;O()(ma,"components",{QPage:Xe.Z,QIcon:me.Z,QSeparator:U.Z,QCard:V.Z,QCardSection:M.Z,QTabs:pa.Z,QTab:ua.Z,QTabPanels:ba.Z,QTabPanel:fa.Z,QTable:de.Z,QTh:ce.Z,QToggle:pe.Z,QSelect:H.Z});const va={class:"text-center text-h5"},wa=(0,t.Uk)(" Laboratorio"),ha={key:0,class:"text-center text-h6"},Wa={key:1,class:"text-center text-h6"};function ya(e,a,o,l,i,n){const s=(0,t.up)("q-icon");return(0,t.wg)(),(0,t.j4)("div",null,[(0,t.Wm)("p",va,[(0,t.Wm)(s,{name:"biotech",size:"lg"}),wa]),null==e.state.convenzionato?((0,t.wg)(),(0,t.j4)("p",ha," Non si è stati ancora aggiunti alla lista dei laboratori convenzionati. ")):(0,t.kq)("",!0),0==e.state.convenzionato?((0,t.wg)(),(0,t.j4)("p",Wa,"Convenzione non concessa")):(0,t.kq)("",!0)])}const xa=(0,t.aZ)({name:"NonConvenzionatoLaboratorio",setup(){const e=(0,r.e)();return{state:e}}});xa.render=ya;const ka=xa;O()(xa,"components",{QIcon:me.Z});const Da={class:"text-center text-h5"},za=(0,t.Uk)(" Medico"),_a={key:0,class:"text-center text-h4"},Za={key:1,class:"text-center text-h4"};function Ya(e,a,o,l,i,n){const s=(0,t.up)("q-icon");return(0,t.wg)(),(0,t.j4)("div",null,[(0,t.Wm)("p",Da,[(0,t.Wm)(s,{name:"biotech",size:"lg"}),za]),null==e.state.approvato?((0,t.wg)(),(0,t.j4)("p",_a,"Non si è stati ancora aggiunti alla lista dei medici approvati.")):(0,t.kq)("",!0),0==e.state.approvato?((0,t.wg)(),(0,t.j4)("p",Za,"Approvazione non concessa.")):(0,t.kq)("",!0)])}const qa=(0,t.aZ)({name:"NonApprovatoMedico",setup(){const e=(0,r.e)();return{state:e}}});qa.render=Ya;const Ca=qa;O()(qa,"components",{QIcon:me.Z});const Va=(0,t.aZ)({name:"PageIndex",components:{NoLoginHome:b,CittadinoHome:fe,MedicoHome:Ee,DatoreHome:Ne,LaboratorioHome:Pe,AmministratoreHome:ea,AslHome:ga,NonConvenzionatoLaboratorio:ka,NonApprovatoMedico:Ca},setup(){const{isAuthenticated:e,user:a}=(0,n.a)(s.auth),o=(0,r.e)(),l=(0,t.Fl)((()=>{if(o.value.tipo_utente)switch(o.value.tipo_utente){case 1:return fe;case 2:return o.value.approvato?Ee:Ca;case 3:return Ne;case 4:return o.value.approvato?Pe:ka;case 5:return ea;case 6:return ga}return b}));return(0,t.m0)((()=>{e.value&&a.value&&a.value.uid&&s.db.collection("users").doc(a.value.uid).get().then((e=>{if(e.exists){const t=e.data();o.value.id=a.value.uid,o.value.nome=t.nome,t.tipo_utente>2?o.value.nomecompleto=t.nome:(o.value.nomecompleto=t.nome+" "+t.cognome,o.value.cognome=t.cognome,o.value.cf=t.codicefiscale),o.value.tipo_utente=t.tipo_utente,2!=t.tipo_utente&&4!=t.tipo_utente||(o.value.approvato=t.approvato)}}))})),{currentPage:l}}});Va.render=i;const Pa=Va;O()(Va,"components",{QPage:Xe.Z})}}]);